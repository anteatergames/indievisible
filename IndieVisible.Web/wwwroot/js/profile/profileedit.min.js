/*!
 * Cropper.js v1.5.6
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2019-10-04T04:33:48.372Z
 */
(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self,n.Cropper=t())})(this,function(){"use strict";function st(n){return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},st(n)}function pr(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function oi(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function wr(n,t,i){return t&&oi(n.prototype,t),i&&oi(n,i),n}function br(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function si(n,t){var r=Object.keys(n),i;return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function hi(n){for(var i,t=1;t<arguments.length;t++)i=arguments[t]!=null?arguments[t]:{},t%2?si(i,!0).forEach(function(t){br(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):si(i).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))});return n}function ci(n){return kr(n)||dr(n)||gr()}function kr(n){if(Array.isArray(n)){for(var t=0,i=new Array(n.length);t<n.length;t++)i[t]=n[t];return i}}function dr(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function gr(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function n(n){return typeof n=="number"&&!lu(n)}function ri(n){return typeof n=="undefined"}function w(n){return st(n)==="object"&&n!==null}function k(n){if(!w(n))return!1;try{var t=n.constructor,i=t.prototype;return t&&i&&au.call(i,"isPrototypeOf")}catch(r){return!1}}function e(n){return typeof n=="function"}function or(n){return Array.from?Array.from(n):vu.call(n)}function r(t,i){return t&&e(i)&&(Array.isArray(t)||n(t.length)?or(t).forEach(function(n,r){i.call(t,n,r,t)}):w(t)&&Object.keys(t).forEach(function(n){i.call(t,t[n],n,t)})),t}function d(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1e11;return yu.test(n)?Math.round(n*t)/t:n}function a(t,i){var u=t.style;r(i,function(t,i){pu.test(i)&&n(t)&&(t="".concat(t,"px"));u[i]=t})}function wu(n,t){return n.classList?n.classList.contains(t):n.className.indexOf(t)>-1}function u(t,i){if(i){if(n(t.length)){r(t,function(n){u(n,i)});return}if(t.classList){t.classList.add(i);return}var f=t.className.trim();f?f.indexOf(i)<0&&(t.className="".concat(f," ").concat(i)):t.className=i}}function h(t,i){if(i){if(n(t.length)){r(t,function(n){h(n,i)});return}if(t.classList){t.classList.remove(i);return}t.className.indexOf(i)>=0&&(t.className=t.className.replace(i,""))}}function g(t,i,f){if(i){if(n(t.length)){r(t,function(n){g(n,i,f)});return}f?u(t,i):h(t,i)}}function ui(n){return n.replace(bu,"$1-$2").toLowerCase()}function fi(n,t){return w(n[t])?n[t]:n.dataset?n.dataset[t]:n.getAttribute("data-".concat(ui(t)))}function et(n,t,i){w(i)?n[t]=i:n.dataset?n.dataset[t]=i:n.setAttribute("data-".concat(ui(t)),i)}function ku(n,t){if(w(n[t]))try{delete n[t]}catch(i){n[t]=undefined}else if(n.dataset)try{delete n.dataset[t]}catch(i){n.dataset[t]=undefined}else n.removeAttribute("data-".concat(ui(t)))}function s(n,t,i){var u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},r=i;t.trim().split(sr).forEach(function(t){if(!hr){var f=n.listeners;f&&f[t]&&f[t][i]&&(r=f[t][i],delete f[t][i],Object.keys(f[t]).length===0&&delete f[t],Object.keys(f).length===0&&delete n.listeners)}n.removeEventListener(t,r,u)})}function o(n,t,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},u=i;t.trim().split(sr).forEach(function(t){if(r.once&&!hr){var e=n.listeners,f=e===void 0?{}:e;u=function(){delete f[t][i];n.removeEventListener(t,u,r);for(var o=arguments.length,s=new Array(o),e=0;e<o;e++)s[e]=arguments[e];i.apply(n,s)};f[t]||(f[t]={});f[t][i]&&n.removeEventListener(t,f[t][i],r);f[t][i]=u;n.listeners=f}n.addEventListener(t,u,r)})}function nt(n,t,i){var r;return e(Event)&&e(CustomEvent)?r=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,i)),n.dispatchEvent(r)}function cr(n){var t=n.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}function lr(n){var t=n.match(du);return t!==null&&(t[1]!==ei.protocol||t[2]!==ei.hostname||t[3]!==ei.port)}function ar(n){var t="timestamp=".concat((new Date).getTime());return n+(n.indexOf("?")===-1?"?":"&")+t}function ot(t){var u=t.rotate,f=t.scaleX,e=t.scaleY,o=t.translateX,s=t.translateY,i=[],r;return n(o)&&o!==0&&i.push("translateX(".concat(o,"px)")),n(s)&&s!==0&&i.push("translateY(".concat(s,"px)")),n(u)&&u!==0&&i.push("rotate(".concat(u,"deg)")),n(f)&&f!==1&&i.push("scaleX(".concat(f,")")),n(e)&&e!==1&&i.push("scaleY(".concat(e,")")),r=i.length?i.join(" "):"none",{WebkitTransform:r,msTransform:r,transform:r}}function gu(n){var i=hi({},n),t=[];return r(n,function(n,u){delete i[u];r(i,function(i){var r=Math.abs(n.startX-i.startX),u=Math.abs(n.startY-i.startY),f=Math.abs(n.endX-i.endX),e=Math.abs(n.endY-i.endY),o=Math.sqrt(r*r+u*u),s=Math.sqrt(f*f+e*e),h=(s-o)/o;t.push(h)})}),t.sort(function(n,t){return Math.abs(n)<Math.abs(t)}),t[0]}function at(n,t){var i=n.pageX,r=n.pageY,u={endX:i,endY:r};return t?u:hi({startX:i,startY:r},u)}function nf(n){var t=0,i=0,u=0;return r(n,function(n){var r=n.startX,f=n.startY;t+=r;i+=f;u+=1}),t/=u,i/=u,{pageX:t,pageY:i}}function v(n){var r=n.aspectRatio,i=n.height,t=n.width,f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"contain",e=er(t),o=er(i),u;return e&&o?(u=i*r,f==="contain"&&u>t||f==="cover"&&u<t?i=t/r:t=i*r):e?i=t/r:o&&(t=i*r),{width:t,height:i}}function tf(n){var i=n.width,r=n.height,t=n.degree;if(t=Math.abs(t)%180,t===90)return{width:r,height:i};var u=t%90*Math.PI/180,f=Math.sin(u),e=Math.cos(u),o=i*e+r*f,s=i*f+r*e;return t>90?{width:s,height:o}:{width:o,height:s}}function rf(n,t,i,r){var s=t.aspectRatio,lt=t.naturalWidth,at=t.naturalHeight,h=t.rotate,vt=h===void 0?0:h,c=t.scaleX,yt=c===void 0?1:c,l=t.scaleY,pt=l===void 0?1:l,a=i.aspectRatio,wt=i.naturalWidth,bt=i.naturalHeight,y=r.fillColor,kt=y===void 0?"transparent":y,p=r.imageSmoothingEnabled,dt=p===void 0?!0:p,w=r.imageSmoothingQuality,gt=w===void 0?"low":w,b=r.maxWidth,k=b===void 0?Infinity:b,g=r.maxHeight,nt=g===void 0?Infinity:g,tt=r.minWidth,it=tt===void 0?0:tt,rt=r.minHeight,ut=rt===void 0?0:rt,f=document.createElement("canvas"),u=f.getContext("2d"),ft=v({aspectRatio:a,width:k,height:nt}),et=v({aspectRatio:a,width:it,height:ut},"cover"),e=Math.min(ft.width,Math.max(et.width,wt)),o=Math.min(ft.height,Math.max(et.height,bt)),ot=v({aspectRatio:s,width:k,height:nt}),st=v({aspectRatio:s,width:it,height:ut},"cover"),ht=Math.min(ot.width,Math.max(st.width,lt)),ct=Math.min(ot.height,Math.max(st.height,at)),ni=[-ht/2,-ct/2,ht,ct];return f.width=d(e),f.height=d(o),u.fillStyle=kt,u.fillRect(0,0,e,o),u.save(),u.translate(e/2,o/2),u.rotate(vt*Math.PI/180),u.scale(yt,pt),u.imageSmoothingEnabled=dt,u.imageSmoothingQuality=gt,u.drawImage.apply(u,[n].concat(ci(ni.map(function(n){return Math.floor(d(n))})))),u.restore(),f}function uf(n,t,i){var u="",r;for(i+=t,r=t;r<i;r+=1)u+=vr(n.getUint8(r));return u}function ef(n){var f=n.replace(ff,""),t=atob(f),i=new ArrayBuffer(t.length),u=new Uint8Array(i);return r(u,function(n,i){u[i]=t.charCodeAt(i)}),i}function of(n,t){for(var r=[],u=8192,i=new Uint8Array(n);i.length>0;)r.push(vr.apply(null,or(i.subarray(0,u)))),i=i.subarray(u);return"data:".concat(t,";base64,").concat(btoa(r.join("")))}function sf(n){var t=new DataView(n),h,i,e,o,a,r,v,u,c,l,y,f,s;try{if(t.getUint8(0)===255&&t.getUint8(1)===216)for(a=t.byteLength,r=2;r+1<a;){if(t.getUint8(r)===255&&t.getUint8(r+1)===225){e=r;break}r+=1}if(e&&(v=e+4,u=e+10,uf(t,v,4)==="Exif"&&(c=t.getUint16(u),i=c===18761,(i||c===19789)&&t.getUint16(u+2,i)===42&&(l=t.getUint32(u+4,i),l>=8&&(o=u+l)))),o)for(y=t.getUint16(o,i),s=0;s<y;s+=1)if(f=o+s*12+2,t.getUint16(f,i)===274){f+=8;h=t.getUint16(f,i);t.setUint16(f,1,i);break}}catch(p){h=1}return h}function hf(n){var t=0,i=1,r=1;switch(n){case 2:i=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90;r=-1;break;case 6:t=90;break;case 7:t=90;i=-1;break;case 8:t=-90}return{rotate:t,scaleX:i,scaleY:r}}var ht=typeof window!="undefined"&&typeof document!="undefined",c=ht?window:{},vt=ht?"ontouchstart"in c.document.documentElement:!1,yt=ht?"PointerEvent"in c:!1,t="cropper",pt="all",li="crop",ai="move",vi="zoom",y="e",p="w",b="s",l="n",tt="ne",it="nw",rt="se",ut="sw",wt="".concat(t,"-crop"),yi="".concat(t,"-disabled"),f="".concat(t,"-hidden"),pi="".concat(t,"-hide"),nu="".concat(t,"-invisible"),ct="".concat(t,"-modal"),bt="".concat(t,"-move"),ft="".concat(t,"Action"),lt="".concat(t,"Preview"),kt="crop",wi="move",bi="none",dt="crop",gt="cropend",ni="cropmove",ti="cropstart",ki="dblclick",tu=vt?"touchstart":"mousedown",iu=vt?"touchmove":"mousemove",ru=vt?"touchend touchcancel":"mouseup",di=yt?"pointerdown":tu,gi=yt?"pointermove":iu,nr=yt?"pointerup pointercancel":ru,tr="ready",ir="resize",rr="wheel",ii="zoom",ur="image/jpeg",uu=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,fu=/^data:/,eu=/^data:image\/jpeg;base64,/,ou=/^img|canvas$/i,su=200,hu=100,fr={viewMode:0,dragMode:kt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},cu='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"><\/div><\/div><div class="cropper-drag-box"><\/div><div class="cropper-crop-box"><span class="cropper-view-box"><\/span><span class="cropper-dashed dashed-h"><\/span><span class="cropper-dashed dashed-v"><\/span><span class="cropper-center"><\/span><span class="cropper-face"><\/span><span class="cropper-line line-e" data-cropper-action="e"><\/span><span class="cropper-line line-n" data-cropper-action="n"><\/span><span class="cropper-line line-w" data-cropper-action="w"><\/span><span class="cropper-line line-s" data-cropper-action="s"><\/span><span class="cropper-point point-e" data-cropper-action="e"><\/span><span class="cropper-point point-n" data-cropper-action="n"><\/span><span class="cropper-point point-w" data-cropper-action="w"><\/span><span class="cropper-point point-s" data-cropper-action="s"><\/span><span class="cropper-point point-ne" data-cropper-action="ne"><\/span><span class="cropper-point point-nw" data-cropper-action="nw"><\/span><span class="cropper-point point-sw" data-cropper-action="sw"><\/span><span class="cropper-point point-se" data-cropper-action="se"><\/span><\/div><\/div>',lu=Number.isNaN||c.isNaN,er=function(n){return n>0&&n<Infinity},au=Object.prototype.hasOwnProperty,vu=Array.prototype.slice,i=Object.assign||function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return w(n)&&r.length>0&&r.forEach(function(t){w(t)&&Object.keys(t).forEach(function(i){n[i]=t[i]})}),n},yu=/\.\d*(?:0|9){12}\d*$/,pu=/^width|height|left|top|marginLeft|marginTop$/,bu=/([a-z\d])([A-Z])/g,sr=/\s\s*/,hr=function(){var n=!1;if(ht){var t=!1,i=function(){},r=Object.defineProperty({},"once",{get:function(){return n=!0,t},set:function(n){t=n}});c.addEventListener("test",i,r);c.removeEventListener("test",i,r)}return n}(),ei=c.location,du=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i,vr=String.fromCharCode,ff=/^data:.*,/,cf={render:function(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();this.cropped&&this.renderCropBox()},initContainer:function(){var i=this.element,r=this.options,e=this.container,t=this.cropper,n;u(t,f);h(i,f);n={width:Math.max(e.offsetWidth,Number(r.minContainerWidth)||200),height:Math.max(e.offsetHeight,Number(r.minContainerHeight)||100)};this.containerData=n;a(t,{width:n.width,height:n.height});u(i,f);h(t,f)},initCanvas:function(){var n=this.containerData,r=this.imageData,f=this.options.viewMode,s=Math.abs(r.rotate)%180==90,h=s?r.naturalHeight:r.naturalWidth,c=s?r.naturalWidth:r.naturalHeight,u=h/c,e=n.width,o=n.height,t;n.height*u>n.width?f===3?e=n.height*u:o=n.width/u:f===3?o=n.width/u:e=n.height*u;t={aspectRatio:u,naturalWidth:h,naturalHeight:c,width:e,height:o};t.left=(n.width-e)/2;t.top=(n.height-o)/2;t.oldLeft=t.left;t.oldTop=t.top;this.canvasData=t;this.limited=f===1||f===2;this.limitCanvas(!0,!0);this.initialImageData=i({},r);this.initialCanvasData=i({},t)},limitCanvas:function(n,t){var a=this.options,e=this.containerData,i=this.canvasData,f=this.cropBoxData,s=a.viewMode,o=i.aspectRatio,h=this.cropped&&f,r,u,y,c,l;n&&(r=Number(a.minCanvasWidth)||0,u=Number(a.minCanvasHeight)||0,s>1?(r=Math.max(r,e.width),u=Math.max(u,e.height),s===3&&(u*o>r?r=u*o:u=r/o)):s>0&&(r?r=Math.max(r,h?f.width:0):u?u=Math.max(u,h?f.height:0):h&&(r=f.width,u=f.height,u*o>r?r=u*o:u=r/o)),y=v({aspectRatio:o,width:r,height:u}),r=y.width,u=y.height,i.minWidth=r,i.minHeight=u,i.maxWidth=Infinity,i.maxHeight=Infinity);t&&(s>(h?0:1)?(c=e.width-i.width,l=e.height-i.height,i.minLeft=Math.min(0,c),i.minTop=Math.min(0,l),i.maxLeft=Math.max(0,c),i.maxTop=Math.max(0,l),h&&this.limited&&(i.minLeft=Math.min(f.left,f.left+(f.width-i.width)),i.minTop=Math.min(f.top,f.top+(f.height-i.height)),i.maxLeft=f.left,i.maxTop=f.top,s===2&&(i.width>=e.width&&(i.minLeft=Math.min(0,c),i.maxLeft=Math.max(0,c)),i.height>=e.height&&(i.minTop=Math.min(0,l),i.maxTop=Math.max(0,l))))):(i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=e.width,i.maxTop=e.height))},renderCanvas:function(n,t){var r=this.canvasData,u=this.imageData;if(t){var o=tf({width:u.naturalWidth*Math.abs(u.scaleX||1),height:u.naturalHeight*Math.abs(u.scaleY||1),degree:u.rotate||0}),f=o.width,e=o.height,s=r.width*(f/r.naturalWidth),h=r.height*(e/r.naturalHeight);r.left-=(s-r.width)/2;r.top-=(h-r.height)/2;r.width=s;r.height=h;r.aspectRatio=f/e;r.naturalWidth=f;r.naturalHeight=e;this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft);(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop);r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth);r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight);this.limitCanvas(!1,!0);r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft);r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop);r.oldLeft=r.left;r.oldTop=r.top;a(this.canvas,i({width:r.width,height:r.height},ot({translateX:r.left,translateY:r.top})));this.renderImage(n);this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(n){var r=this.canvasData,t=this.imageData,u=t.naturalWidth*(r.width/r.naturalWidth),f=t.naturalHeight*(r.height/r.naturalHeight);i(t,{width:u,height:f,left:(r.width-u)/2,top:(r.height-f)/2});a(this.image,i({width:t.width,height:t.height},ot(i({translateX:t.left,translateY:t.top},t))));n&&this.output()},initCropBox:function(){var u=this.options,t=this.canvasData,r=u.aspectRatio||u.initialAspectRatio,f=Number(u.autoCropArea)||.8,n={width:t.width,height:t.height};r&&(t.height*r>t.width?n.height=n.width/r:n.width=n.height*r);this.cropBoxData=n;this.limitCropBox(!0,!0);n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth);n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight);n.width=Math.max(n.minWidth,n.width*f);n.height=Math.max(n.minHeight,n.height*f);n.left=t.left+(t.width-n.width)/2;n.top=t.top+(t.height-n.height)/2;n.oldLeft=n.left;n.oldTop=n.top;this.initialCropBoxData=i({},n)},limitCropBox:function(n,t){var c=this.options,u=this.containerData,r=this.canvasData,i=this.cropBoxData,l=this.limited,o=c.aspectRatio;if(n){var f=Number(c.minCropBoxWidth)||0,e=Number(c.minCropBoxHeight)||0,s=l?Math.min(u.width,r.width,r.width+r.left,u.width-r.left):u.width,h=l?Math.min(u.height,r.height,r.height+r.top,u.height-r.top):u.height;f=Math.min(f,u.width);e=Math.min(e,u.height);o&&(f&&e?e*o>f?e=f/o:f=e*o:f?e=f/o:e&&(f=e*o),h*o>s?h=s/o:s=h*o);i.minWidth=Math.min(f,s);i.minHeight=Math.min(e,h);i.maxWidth=s;i.maxHeight=h}t&&(l?(i.minLeft=Math.max(0,r.left),i.minTop=Math.max(0,r.top),i.maxLeft=Math.min(u.width,r.left+r.width)-i.width,i.maxTop=Math.min(u.height,r.top+r.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=u.width-i.width,i.maxTop=u.height-i.height))},renderCropBox:function(){var t=this.options,r=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft);(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop);n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth);n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight);this.limitCropBox(!1,!0);n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft);n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop);n.oldLeft=n.left;n.oldTop=n.top;t.movable&&t.cropBoxMovable&&et(this.face,ft,n.width>=r.width&&n.height>=r.height?ai:pt);a(this.cropBox,i({width:n.width,height:n.height},ot({translateX:n.left,translateY:n.top})));this.cropped&&this.limited&&this.limitCanvas(!0,!0);this.disabled||this.output()},output:function(){this.preview();nt(this.element,dt,this.getData())}},lf={initPreview:function(){var f=this.element,t=this.crossOrigin,n=this.options.preview,e=t?this.crossOriginUrl:this.url,o=f.alt||"The image to preview",i=document.createElement("img"),u;(t&&(i.crossOrigin=t),i.src=e,i.alt=o,this.viewBox.appendChild(i),this.viewBoxImage=i,n)&&(u=n,typeof n=="string"?u=f.ownerDocument.querySelectorAll(n):n.querySelector&&(u=[n]),this.previews=u,r(u,function(n){var i=document.createElement("img");et(n,lt,{width:n.offsetWidth,height:n.offsetHeight,html:n.innerHTML});t&&(i.crossOrigin=t);i.src=e;i.alt=o;i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"';n.innerHTML="";n.appendChild(i)}))},resetPreview:function(){r(this.previews,function(n){var t=fi(n,lt);a(n,{width:t.width,height:t.height});n.innerHTML=t.html;ku(n,lt)})},preview:function(){var n=this.imageData,e=this.canvasData,t=this.cropBoxData,u=t.width,f=t.height,o=n.width,s=n.height,h=t.left-e.left-n.left,c=t.top-e.top-n.top;this.cropped&&!this.disabled&&(a(this.viewBoxImage,i({width:o,height:s},ot(i({translateX:-h,translateY:-c},n)))),r(this.previews,function(t){var v=fi(t,lt),y=v.width,e=v.height,p=y,l=e,r=1;u&&(r=y/u,l=f*r);f&&l>e&&(r=e/f,p=u*r,l=e);a(t,{width:p,height:l});a(t.getElementsByTagName("img")[0],i({width:o*r,height:s*r},ot(i({translateX:-h*r,translateY:-c*r},n))))}))}},af={bind:function(){var t=this.element,n=this.options,i=this.cropper;e(n.cropstart)&&o(t,ti,n.cropstart);e(n.cropmove)&&o(t,ni,n.cropmove);e(n.cropend)&&o(t,gt,n.cropend);e(n.crop)&&o(t,dt,n.crop);e(n.zoom)&&o(t,ii,n.zoom);o(i,di,this.onCropStart=this.cropStart.bind(this));n.zoomable&&n.zoomOnWheel&&o(i,rr,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0});n.toggleDragModeOnDblclick&&o(i,ki,this.onDblclick=this.dblclick.bind(this));o(t.ownerDocument,gi,this.onCropMove=this.cropMove.bind(this));o(t.ownerDocument,nr,this.onCropEnd=this.cropEnd.bind(this));n.responsive&&o(window,ir,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,n=this.options,i=this.cropper;e(n.cropstart)&&s(t,ti,n.cropstart);e(n.cropmove)&&s(t,ni,n.cropmove);e(n.cropend)&&s(t,gt,n.cropend);e(n.crop)&&s(t,dt,n.crop);e(n.zoom)&&s(t,ii,n.zoom);s(i,di,this.onCropStart);n.zoomable&&n.zoomOnWheel&&s(i,rr,this.onWheel,{passive:!1,capture:!0});n.toggleDragModeOnDblclick&&s(i,ki,this.onDblclick);s(t.ownerDocument,gi,this.onCropMove);s(t.ownerDocument,nr,this.onCropEnd);n.responsive&&s(window,ir,this.onResize)}},vf={resize:function(){var n=this.options,e=this.container,t=this.containerData,o=Number(n.minContainerWidth)||su,s=Number(n.minContainerHeight)||hu,i,u,f;this.disabled||t.width<=o||t.height<=s||(i=e.offsetWidth/t.width,(i!==1||e.offsetHeight!==t.height)&&(n.restore&&(u=this.getCanvasData(),f=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(r(u,function(n,t){u[t]=n*i})),this.setCropBoxData(r(f,function(n,t){f[t]=n*i})))))},dblclick:function(){this.disabled||this.options.dragMode===bi||this.setDragMode(wu(this.dragBox,wt)?wi:kt)},wheel:function(n){var i=this,r=Number(this.options.wheelZoomRatio)||.1,t=1;this.disabled||(n.preventDefault(),this.wheeling)||(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),n.deltaY?t=n.deltaY>0?1:-1:n.wheelDelta?t=-n.wheelDelta/120:n.detail&&(t=n.detail>0?1:-1),this.zoom(-t*r,n))},cropStart:function(t){var o=t.buttons,s=t.button,e,f,i;this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(n(o)&&o!==1||n(s)&&s!==0||t.ctrlKey)||(e=this.options,f=this.pointers,t.changedTouches?r(t.changedTouches,function(n){f[n.identifier]=at(n)}):f[t.pointerId||0]=at(t),i=Object.keys(f).length>1&&e.zoomable&&e.zoomOnTouch?vi:fi(t.target,ft),uu.test(i))&&nt(this.element,ti,{originalEvent:t,action:i})!==!1&&(t.preventDefault(),this.action=i,this.cropping=!1,i===li&&(this.cropping=!0,u(this.dragBox,ct)))},cropMove:function(n){var u=this.action,t;!this.disabled&&u&&(t=this.pointers,n.preventDefault(),nt(this.element,ni,{originalEvent:n,action:u})!==!1)&&(n.changedTouches?r(n.changedTouches,function(n){i(t[n.identifier]||{},at(n,!0))}):i(t[n.pointerId||0]||{},at(n,!0)),this.change(n))},cropEnd:function(n){if(!this.disabled){var i=this.action,t=this.pointers;(n.changedTouches?r(n.changedTouches,function(n){delete t[n.identifier]}):delete t[n.pointerId||0],i)&&(n.preventDefault(),Object.keys(t).length||(this.action=""),this.cropping&&(this.cropping=!1,g(this.dragBox,ct,this.cropped&&this.options.modal)),nt(this.element,gt,{originalEvent:n,action:i}))}}},yf={change:function(n){var at=this.options,ot=this.canvasData,ht=this.containerData,a=this.cropBoxData,ct=this.pointers,c=this.action,s=at.aspectRatio,o=a.left,e=a.top,i=a.width,u=a.height,et=o+i,g=e+u,nt=0,k=0,ft=ht.width,d=ht.height,v=!0,lt;!s&&n.shiftKey&&(s=i&&u?i/u:1);this.limited&&(nt=a.minLeft,k=a.minTop,ft=nt+Math.min(ht.width,ot.width,ot.left+ot.width),d=k+Math.min(ht.height,ot.height,ot.top+ot.height));var st=ct[Object.keys(ct)[0]],t={x:st.endX-st.startX,y:st.endY-st.startY},w=function(n){switch(n){case y:et+t.x>ft&&(t.x=ft-et);break;case p:o+t.x<nt&&(t.x=nt-o);break;case l:e+t.y<k&&(t.y=k-e);break;case b:g+t.y>d&&(t.y=d-g)}};switch(c){case pt:o+=t.x;e+=t.y;break;case y:if(t.x>=0&&(et>=ft||s&&(e<=k||g>=d))){v=!1;break}w(y);i+=t.x;i<0&&(c=p,i=-i,o-=i);s&&(u=i/s,e+=(a.height-u)/2);break;case l:if(t.y<=0&&(e<=k||s&&(o<=nt||et>=ft))){v=!1;break}w(l);u-=t.y;e+=t.y;u<0&&(c=b,u=-u,e-=u);s&&(i=u*s,o+=(a.width-i)/2);break;case p:if(t.x<=0&&(o<=nt||s&&(e<=k||g>=d))){v=!1;break}w(p);i-=t.x;o+=t.x;i<0&&(c=y,i=-i,o-=i);s&&(u=i/s,e+=(a.height-u)/2);break;case b:if(t.y>=0&&(g>=d||s&&(o<=nt||et>=ft))){v=!1;break}w(b);u+=t.y;u<0&&(c=l,u=-u,e-=u);s&&(i=u*s,o+=(a.width-i)/2);break;case tt:if(s){if(t.y<=0&&(e<=k||et>=ft)){v=!1;break}w(l);u-=t.y;e+=t.y;i=u*s}else w(l),w(y),t.x>=0?et<ft?i+=t.x:t.y<=0&&e<=k&&(v=!1):i+=t.x,t.y<=0?e>k&&(u-=t.y,e+=t.y):(u-=t.y,e+=t.y);i<0&&u<0?(c=ut,u=-u,i=-i,e-=u,o-=i):i<0?(c=it,i=-i,o-=i):u<0&&(c=rt,u=-u,e-=u);break;case it:if(s){if(t.y<=0&&(e<=k||o<=nt)){v=!1;break}w(l);u-=t.y;e+=t.y;i=u*s;o+=a.width-i}else w(l),w(p),t.x<=0?o>nt?(i-=t.x,o+=t.x):t.y<=0&&e<=k&&(v=!1):(i-=t.x,o+=t.x),t.y<=0?e>k&&(u-=t.y,e+=t.y):(u-=t.y,e+=t.y);i<0&&u<0?(c=rt,u=-u,i=-i,e-=u,o-=i):i<0?(c=tt,i=-i,o-=i):u<0&&(c=ut,u=-u,e-=u);break;case ut:if(s){if(t.x<=0&&(o<=nt||g>=d)){v=!1;break}w(p);i-=t.x;o+=t.x;u=i/s}else w(b),w(p),t.x<=0?o>nt?(i-=t.x,o+=t.x):t.y>=0&&g>=d&&(v=!1):(i-=t.x,o+=t.x),t.y>=0?g<d&&(u+=t.y):u+=t.y;i<0&&u<0?(c=tt,u=-u,i=-i,e-=u,o-=i):i<0?(c=rt,i=-i,o-=i):u<0&&(c=it,u=-u,e-=u);break;case rt:if(s){if(t.x>=0&&(et>=ft||g>=d)){v=!1;break}w(y);i+=t.x;u=i/s}else w(b),w(y),t.x>=0?et<ft?i+=t.x:t.y>=0&&g>=d&&(v=!1):i+=t.x,t.y>=0?g<d&&(u+=t.y):u+=t.y;i<0&&u<0?(c=it,u=-u,i=-i,e-=u,o-=i):i<0?(c=ut,i=-i,o-=i):u<0&&(c=tt,u=-u,e-=u);break;case ai:this.move(t.x,t.y);v=!1;break;case vi:this.zoom(gu(ct),n);v=!1;break;case li:if(!t.x||!t.y){v=!1;break}lt=cr(this.cropper);o=st.startX-lt.left;e=st.startY-lt.top;i=a.minWidth;u=a.minHeight;t.x>0?c=t.y>0?rt:tt:t.x<0&&(o-=i,c=t.y>0?ut:it);t.y<0&&(e-=u);this.cropped||(h(this.cropBox,f),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}v&&(a.width=i,a.height=u,a.left=o,a.top=e,this.action=c,this.renderCropBox());r(ct,function(n){n.startX=n.endX;n.startY=n.endY})}},pf={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&u(this.dragBox,ct),h(this.cropBox,f),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=i({},this.initialImageData),this.canvasData=i({},this.initialCanvasData),this.cropBoxData=i({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(i(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),h(this.dragBox,ct),u(this.cropBox,f)),this},replace:function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return!this.disabled&&n&&(this.isImg&&(this.element.src=n),t?(this.url=n,this.image.src=n,this.ready&&(this.viewBoxImage.src=n,r(this.previews,function(t){t.getElementsByTagName("img")[0].src=n}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(n))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,h(this.cropper,yi)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,u(this.cropper,yi)),this},destroy:function(){var n=this.element;return n[t]?(n[t]=undefined,this.isImg&&this.replaced&&(n.src=this.originalUrl),this.uncreate(),this):this},move:function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:n,i=this.canvasData,r=i.left,u=i.top;return this.moveTo(ri(n)?n:r+Number(n),ri(t)?t:u+Number(t))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:t,u=this.canvasData,r=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(n(t)&&(u.left=t,r=!0),n(i)&&(u.top=i,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(n,t){var i=this.canvasData;return n=Number(n),n=n<0?1/(1-n):1+n,this.zoomTo(i.width*n/i.naturalWidth,null,t)},zoomTo:function(t,i,r){var v=this.options,u=this.canvasData,f=u.width,e=u.height,c=u.naturalWidth,y=u.naturalHeight,o,s;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&v.zoomable){if(o=c*t,s=y*t,nt(this.element,ii,{ratio:t,oldRatio:f/c,originalEvent:r})===!1)return this;if(r){var h=this.pointers,l=cr(this.cropper),a=h&&Object.keys(h).length?nf(h):{pageX:r.pageX,pageY:r.pageY};u.left-=(o-f)*((a.pageX-l.left-u.left)/f);u.top-=(s-e)*((a.pageY-l.top-u.top)/e)}else k(i)&&n(i.x)&&n(i.y)?(u.left-=(o-f)*((i.x-u.left)/f),u.top-=(s-e)*((i.y-u.top)/e)):(u.left-=(o-f)/2,u.top-=(s-e)/2);u.width=o;u.height=s;this.renderCanvas(!0)}return this},rotate:function(n){return this.rotateTo((this.imageData.rotate||0)+Number(n))},rotateTo:function(t){return t=Number(t),n(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,n(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(n(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:t,u=this.imageData,r=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(n(t)&&(u.scaleX=t,r=!0),n(i)&&(u.scaleY=i,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var h=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1,u=this.options,t=this.imageData,f=this.canvasData,i=this.cropBoxData,n,e,o,s;return this.ready&&this.cropped?(n={x:i.left-f.left,y:i.top-f.top,width:i.width,height:i.height},e=t.width/t.naturalWidth,r(n,function(t,i){n[i]=t/e}),h&&(o=Math.round(n.y+n.height),s=Math.round(n.x+n.width),n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=s-n.x,n.height=o-n.y)):n={x:0,y:0,width:0,height:0},u.rotatable&&(n.rotate=t.rotate||0),u.scalable&&(n.scaleX=t.scaleX||1,n.scaleY=t.scaleY||1),n},setData:function(t){var e=this.options,i=this.imageData,o=this.canvasData,r={},u,f;return this.ready&&!this.disabled&&k(t)&&(u=!1,e.rotatable&&n(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,u=!0),e.scalable&&(n(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,u=!0),n(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,u=!0)),u&&this.renderCanvas(!0,!0),f=i.width/i.naturalWidth,n(t.x)&&(r.left=t.x*f+o.left),n(t.y)&&(r.top=t.y*f+o.top),n(t.width)&&(r.width=t.width*f),n(t.height)&&(r.height=t.height*f),this.setCropBoxData(r)),this},getContainerData:function(){return this.ready?i({},this.containerData):{}},getImageData:function(){return this.sized?i({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,n={};return this.ready&&r(["left","top","width","height","naturalWidth","naturalHeight"],function(i){n[i]=t[i]}),n},setCanvasData:function(t){var i=this.canvasData,r=i.aspectRatio;return this.ready&&!this.disabled&&k(t)&&(n(t.left)&&(i.left=t.left),n(t.top)&&(i.top=t.top),n(t.width)?(i.width=t.width,i.height=t.width/r):n(t.height)&&(i.height=t.height,i.width=t.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var n=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:n.left,top:n.top,width:n.width,height:n.height}),t||{}},setCropBoxData:function(t){var i=this.cropBoxData,r=this.options.aspectRatio,u,f;return this.ready&&this.cropped&&!this.disabled&&k(t)&&(n(t.left)&&(i.left=t.left),n(t.top)&&(i.top=t.top),n(t.width)&&t.width!==i.width&&(u=!0,i.width=t.width),n(t.height)&&t.height!==i.height&&(f=!0,i.height=t.height),r&&(u?i.height=i.width/r:f&&(i.width=i.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},it,r,l,e,ut,p;if(!this.ready||!window.HTMLCanvasElement)return null;if(it=this.canvasData,r=rf(this.image,this.imageData,it,n),!this.cropped)return r;var w=this.getData(),ft=w.x,et=w.y,u=w.width,s=w.height,f=r.width/Math.floor(it.naturalWidth);f!==1&&(ft*=f,et*=f,u*=f,s*=f);var rt=u/s,ot=v({aspectRatio:rt,width:n.maxWidth||Infinity,height:n.maxHeight||Infinity}),st=v({aspectRatio:rt,width:n.minWidth||0,height:n.minHeight||0},"cover"),ht=v({aspectRatio:rt,width:n.width||(f!==1?r.width:u),height:n.height||(f!==1?r.height:s)}),c=ht.width,b=ht.height;c=Math.min(ot.width,Math.max(st.width,c));b=Math.min(ot.height,Math.max(st.height,b));l=document.createElement("canvas");e=l.getContext("2d");l.width=d(c);l.height=d(b);e.fillStyle=n.fillColor||"transparent";e.fillRect(0,0,c,b);var ct=n.imageSmoothingEnabled,at=ct===void 0?!0:ct,lt=n.imageSmoothingQuality;e.imageSmoothingEnabled=at;lt&&(e.imageSmoothingQuality=lt);var k=r.width,g=r.height,t=ft,i=et,o,h,nt,tt,a,y;return t<=-u||t>k?(t=0,o=0,nt=0,a=0):t<=0?(nt=-t,t=0,o=Math.min(k,u+t),a=o):t<=k&&(nt=0,o=Math.min(u,k-t),a=o),o<=0||i<=-s||i>g?(i=0,h=0,tt=0,y=0):i<=0?(tt=-i,i=0,h=Math.min(g,s+i),y=h):i<=g&&(tt=0,h=Math.min(s,g-i),y=h),ut=[t,i,o,h],a>0&&y>0&&(p=c/u,ut.push(nt*p,tt*p,a*p,y*p)),e.drawImage.apply(e,[r].concat(ci(ut.map(function(n){return Math.floor(d(n))})))),l},setAspectRatio:function(n){var t=this.options;return this.disabled||ri(n)||(t.aspectRatio=Math.max(0,n)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(n){var r=this.options,u=this.dragBox,f=this.face,t,i;return this.ready&&!this.disabled&&(t=n===kt,i=r.movable&&n===wi,n=t||i?n:bi,r.dragMode=n,et(u,ft,n),g(u,wt,t),g(u,bt,i),r.cropBoxMovable||(et(f,ft,n),g(f,wt,t),g(f,bt,i))),this}},wf=c.Cropper,yr=function(){function n(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(pr(this,n),!t||!ou.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t;this.options=i({},fr,k(r)&&r);this.cropped=!1;this.disabled=!1;this.pointers={};this.ready=!1;this.reloading=!1;this.replaced=!1;this.sized=!1;this.sizing=!1;this.init()}return wr(n,[{key:"init",value:function(){var n=this.element,r=n.tagName.toLowerCase(),i;if(!n[t]){if(n[t]=this,r==="img"){if(this.isImg=!0,i=n.getAttribute("src")||"",this.originalUrl=i,!i)return;i=n.src}else r==="canvas"&&window.HTMLCanvasElement&&(i=n.toDataURL());this.load(i)}}},{key:"load",value:function(n){var u=this,f,i,t,r;if(n){if(this.url=n,this.imageData={},f=this.element,i=this.options,i.rotatable||i.scalable||(i.checkOrientation=!1),!i.checkOrientation||!window.ArrayBuffer){this.clone();return}if(fu.test(n)){eu.test(n)?this.read(ef(n)):this.clone();return}t=new XMLHttpRequest;r=this.clone.bind(this);this.reloading=!0;this.xhr=t;t.onabort=r;t.onerror=r;t.ontimeout=r;t.onprogress=function(){t.getResponseHeader("content-type")!==ur&&t.abort()};t.onload=function(){u.read(t.response)};t.onloadend=function(){u.reloading=!1;u.xhr=null};i.checkCrossOrigin&&lr(n)&&f.crossOrigin&&(n=ar(n));t.open("GET",n);t.responseType="arraybuffer";t.withCredentials=f.crossOrigin==="use-credentials";t.send()}}},{key:"read",value:function(n){var r=this.options,i=this.imageData,u=sf(n),f=0,e=1,o=1,t;u>1&&(this.url=of(n,ur),t=hf(u),f=t.rotate,e=t.scaleX,o=t.scaleY);r.rotatable&&(i.rotate=f);r.scalable&&(i.scaleX=e,i.scaleY=o);this.clone()}},{key:"clone",value:function(){var i=this.element,r=this.url,t=i.crossOrigin,f=r,n;this.options.checkCrossOrigin&&lr(r)&&(t||(t="anonymous"),f=ar(r));this.crossOrigin=t;this.crossOriginUrl=f;n=document.createElement("img");t&&(n.crossOrigin=t);n.src=f||r;n.alt=i.alt||"The image to crop";this.image=n;n.onload=this.start.bind(this);n.onerror=this.stop.bind(this);u(n,pi);i.parentNode.insertBefore(n,i.nextSibling)}},{key:"start",value:function(){var r=this,t=this.image,u,f,n,e;if(t.onload=null,t.onerror=null,this.sizing=!0,u=c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent),f=function(n,t){i(r.imageData,{naturalWidth:n,naturalHeight:t,aspectRatio:n/t});r.sizing=!1;r.sized=!0;r.build()},t.naturalWidth&&!u){f(t.naturalWidth,t.naturalHeight);return}n=document.createElement("img");e=document.body||document.documentElement;this.sizingImage=n;n.onload=function(){f(n.width,n.height);u||e.removeChild(n)};n.src=t.src;u||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",e.appendChild(n))}},{key:"stop",value:function(){var n=this.image;n.onload=null;n.onerror=null;n.parentNode.removeChild(n);this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var s=this.element,n=this.options,l=this.image,a=s.parentNode,v=document.createElement("div");v.innerHTML=cu;var i=v.querySelector(".".concat(t,"-container")),y=i.querySelector(".".concat(t,"-canvas")),p=i.querySelector(".".concat(t,"-drag-box")),r=i.querySelector(".".concat(t,"-crop-box")),c=r.querySelector(".".concat(t,"-face"));this.container=a;this.cropper=i;this.canvas=y;this.dragBox=p;this.cropBox=r;this.viewBox=i.querySelector(".".concat(t,"-view-box"));this.face=c;y.appendChild(l);u(s,f);a.insertBefore(i,s.nextSibling);this.isImg||h(l,pi);this.initPreview();this.bind();n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN;n.aspectRatio=Math.max(0,n.aspectRatio)||NaN;n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0;u(r,f);n.guides||u(r.getElementsByClassName("".concat(t,"-dashed")),f);n.center||u(r.getElementsByClassName("".concat(t,"-center")),f);n.background&&u(i,"".concat(t,"-bg"));n.highlight||u(c,nu);n.cropBoxMovable&&(u(c,bt),et(c,ft,pt));n.cropBoxResizable||(u(r.getElementsByClassName("".concat(t,"-line")),f),u(r.getElementsByClassName("".concat(t,"-point")),f));this.render();this.ready=!0;this.setDragMode(n.dragMode);n.autoCrop&&this.crop();this.setData(n.data);e(n.ready)&&o(s,tr,n.ready,{once:!0});nt(s,tr)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),h(this.element,f))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=wf,n}},{key:"setDefaults",value:function(n){i(fr,k(n)&&n)}}]),n}();return i(yr.prototype,cf,lf,af,vf,yf,pf),yr});
/*! Select2 4.0.10 | https://github.com/select2/select2/blob/master/LICENSE.md */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(i),i}:n(jQuery)}(function(n){var t=function(){function u(n,t){return g.call(n,t)}function a(n,t){var e,o,s,f,h,y,c,p,i,l,w,u=t&&t.split("/"),a=r.map,v=a&&a["*"]||{};if(n){for(h=(n=n.split("/")).length-1,r.nodeIdCompat&&b.test(n[h])&&(n[h]=n[h].replace(b,"")),"."===n[0].charAt(0)&&u&&(n=u.slice(0,u.length-1).concat(n)),i=0;i<n.length;i++)if("."===(w=n[i]))n.splice(i,1),i-=1;else if(".."===w){if(0===i||1===i&&".."===n[2]||".."===n[i-1])continue;0<i&&(n.splice(i-1,2),i-=2)}n=n.join("/")}if((u||v)&&a){for(i=(e=n.split("/")).length;0<i;i-=1){if(o=e.slice(0,i).join("/"),u)for(l=u.length;0<l;l-=1)if(s=(s=a[u.slice(0,l).join("/")])&&s[o]){f=s;y=i;break}if(f)break;!c&&v&&v[o]&&(c=v[o],p=i)}!f&&c&&(f=c,y=p);f&&(e.splice(0,y,f),n=e.join("/"))}return n}function tt(n,t){return function(){var i=nt.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),o.apply(f,i.concat([n,t]))}}function rt(n){return function(t){i[n]=t}}function v(n){if(u(e,n)){var t=e[n];delete e[n];c[n]=!0;h.apply(f,t)}if(!u(i,n)&&!u(c,n))throw new Error("No "+n);return i[n]}function k(n){var i,t=n?n.indexOf("!"):-1;return-1<t&&(i=n.substring(0,t),n=n.substring(t+1,n.length)),[i,n]}function it(n){return n?k(n):[]}var t,y,p,d,f,h,o,w,s,i,e,r,c,g,nt,b,l;return n&&n.fn&&n.fn.select2&&n.fn.select2.amd&&(t=n.fn.select2.amd),t&&t.requirejs||(t?p=t:t={},i={},e={},r={},c={},g=Object.prototype.hasOwnProperty,nt=[].slice,b=/\.js$/,w=function(n,t){var r,u=k(n),i=u[0],f=t[1];return n=u[1],i&&(r=v(i=a(i,f))),i?n=r&&r.normalize?r.normalize(n,function(n){return function(t){return a(t,n)}}(f)):a(n,f):(i=(u=k(n=a(n,f)))[0],n=u[1],i&&(r=v(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}},s={require:function(n){return tt(n)},exports:function(n){var t=i[n];return void 0!==t?t:i[n]={}},module:function(n){return{id:n,uri:"",exports:i[n],config:function(n){return function(){return r&&r.config&&r.config[n]||{}}}(n)}}},h=function(n,t,r,o){var y,h,b,p,l,k,d,a=[],g=typeof r;if(k=it(o=o||n),"undefined"==g||"function"==g){for(t=!t.length&&r.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(h=(p=w(t[l],k)).f))a[l]=s.require(n);else if("exports"===h)a[l]=s.exports(n),d=!0;else if("module"===h)y=a[l]=s.module(n);else if(u(i,h)||u(e,h)||u(c,h))a[l]=v(h);else{if(!p.p)throw new Error(n+" missing "+h);p.p.load(p.n,tt(o,!0),rt(h),{});a[l]=i[h]}b=r?r.apply(i[n],a):void 0;n&&(y&&y.exports!==f&&y.exports!==i[n]?i[n]=y.exports:b===f&&d||(i[n]=b))}else n&&(i[n]=r)},y=p=o=function(n,t,i,u,e){if("string"==typeof n)return s[n]?s[n](t):v(w(n,it(t)).f);if(!n.splice){if((r=n).deps&&o(r.deps,r.callback),!t)return;t.splice?(n=t,t=i,i=null):n=f}return t=t||function(){},"function"==typeof i&&(i=u,u=e),u?h(f,n,t,i):setTimeout(function(){h(f,n,t,i)},4),o},o.config=function(n){return o(n)},y._defined=i,(d=function(n,t,r){if("string"!=typeof n)throw new Error("See almond README: incorrect module build, no module name");t.splice||(r=t,t=[]);u(i,n)||u(e,n)||(e[n]=[n,t,r])}).amd={jQuery:!0},t.requirejs=y,t.require=p,t.define=d),t.define("almond",function(){}),t.define("jquery",[],function(){var t=n||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(n){function u(n){var i=n.prototype,r=[];for(var t in i)"function"==typeof i[t]&&"constructor"!==t&&r.push(t);return r}function i(){this.listeners={}}var t={},r;return t.Extend=function(n,t){function r(){this.constructor=n}var u={}.hasOwnProperty;for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t.Decorate=function(n,t){function i(){var r=Array.prototype.unshift,u=t.prototype.constructor.length,i=n.prototype.constructor;0<u&&(r.call(arguments,n.prototype.constructor),i=t.prototype.constructor);i.apply(this,arguments)}function c(n){var r=function(){},u;return n in i.prototype&&(r=i.prototype[n]),u=t.prototype[n],function(){return Array.prototype.unshift.call(arguments,r),u.apply(this,arguments)}}var s=u(t),h=u(n),r,e,f,o;for(t.displayName=n.displayName,i.prototype=new function(){this.constructor=i},r=0;r<h.length;r++)e=h[r],i.prototype[e]=n.prototype[e];for(f=0;f<s.length;f++)o=s[f],i.prototype[o]=c(o);return i},i.prototype.on=function(n,t){this.listeners=this.listeners||{};n in this.listeners?this.listeners[n].push(t):this.listeners[n]=[t]},i.prototype.trigger=function(n){var i=Array.prototype.slice,t=i.call(arguments,1);this.listeners=this.listeners||{};null==t&&(t=[]);0===t.length&&t.push({});(t[0]._type=n)in this.listeners&&this.invoke(this.listeners[n],i.call(arguments,1));"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(n,t){for(var i=0,r=n.length;i<r;i++)n[i].apply(this,t)},t.Observable=i,t.generateChars=function(n){for(var t="",i=0;i<n;i++)t+=Math.floor(36*Math.random()).toString(36);return t},t.bind=function(n,t){return function(){n.apply(t,arguments)}},t._convertData=function(n){var f,r,i,u,t;for(f in n)if(r=f.split("-"),i=n,1!==r.length){for(u=0;u<r.length;u++)t=r[u],(t=t.substring(0,1).toLowerCase()+t.substring(1))in i||(i[t]={}),u==r.length-1&&(i[t]=n[f]),i=i[t];delete n[f]}return n},t.hasScroll=function(t,i){var u=n(i),f=i.style.overflowX,r=i.style.overflowY;return(f!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===f||"scroll"===r||u.innerHeight()<i.scrollHeight||u.innerWidth()<i.scrollWidth)},t.escapeMarkup=function(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof n?n:String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})},t.appendMany=function(t,i){if("1.7"===n.fn.jquery.substr(0,3)){var r=n();n.map(i,function(n){r=r.add(n)});i=r}t.append(i)},t.__cache={},r=0,t.GetUniqueElementId=function(n){var t=n.getAttribute("data-select2-id");return null==t&&(n.id?(t=n.id,n.setAttribute("data-select2-id",t)):(n.setAttribute("data-select2-id",++r),t=r.toString())),t},t.StoreData=function(n,i,r){var u=t.GetUniqueElementId(n);t.__cache[u]||(t.__cache[u]={});t.__cache[u][i]=r},t.GetData=function(i,r){var u=t.GetUniqueElementId(i);return r?t.__cache[u]&&null!=t.__cache[u][r]?t.__cache[u][r]:n(i).data(r):t.__cache[u]},t.RemoveData=function(n){var i=t.GetUniqueElementId(n);null!=t.__cache[i]&&delete t.__cache[i];n.removeAttribute("data-select2-id")},t}),t.define("select2/results",["jquery","./utils"],function(n,t){function i(n,t,r){this.$element=n;this.data=r;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<ul class="select2-results__options" role="listbox"><\/ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var u=this.options.get("escapeMarkup"),i,r;this.clear();this.hideLoading();i=n('<li role="alert" aria-live="assertive" class="select2-results__option"><\/li>');r=this.options.get("translations").get(t.message);i.append(u(r(t.args)));i[0].className+=" select2-results__message";this.$results.append(i)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(n){var i,t,r,u;if(this.hideLoading(),i=[],null!=n.results&&0!==n.results.length){for(n.results=this.sort(n.results),t=0;t<n.results.length;t++)r=n.results[t],u=this.option(r),i.push(u);this.$results.append(i)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(n,t){t.find(".select2-results").append(n)},i.prototype.sort=function(n){return this.options.get("sorter")(n)},i.prototype.highlightFirstItem=function(){var n=this.$results.find(".select2-results__option[aria-selected]"),t=n.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):n.first().trigger("mouseenter");this.ensureHighlightVisible()},i.prototype.setClasses=function(){var i=this;this.data.current(function(r){var u=n.map(r,function(n){return n.id.toString()});i.$results.find(".select2-results__option[aria-selected]").each(function(){var r=n(this),i=t.GetData(this,"data"),f=""+i.id;null!=i.element&&i.element.selected||null==i.element&&-1<n.inArray(f,u)?r.attr("aria-selected","true"):r.attr("aria-selected","false")})})},i.prototype.showLoading=function(n){this.hideLoading();var i={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(n)},t=this.option(i);t.className+=" loading-results";this.$results.prepend(t)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(i){var u=document.createElement("li"),r,l,o,a,s,f,h,e,v,y,c;u.className="select2-results__option";r={role:"option","aria-selected":"false"};l=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(o in(null!=i.element&&l.call(i.element,":disabled")||null==i.element&&i.disabled)&&(delete r["aria-selected"],r["aria-disabled"]="true"),null==i.id&&delete r["aria-selected"],null!=i._resultId&&(u.id=i._resultId),i.title&&(u.title=i.title),i.children&&(r.role="group",r["aria-label"]=i.text,delete r["aria-selected"]),r)a=r[o],u.setAttribute(o,a);if(i.children){for(s=n(u),f=document.createElement("strong"),f.className="select2-results__group",n(f),this.template(i,f),h=[],e=0;e<i.children.length;e++)v=i.children[e],y=this.option(v),h.push(y);c=n("<ul><\/ul>",{"class":"select2-results__options select2-results__options--nested"});c.append(h);s.append(f);s.append(c)}else this.template(i,u);return t.StoreData(u,"data",i),u},i.prototype.bind=function(i){var r=this,u=i.id+"-results";this.$results.attr("id",u);i.on("results:all",function(n){r.clear();r.append(n.data);i.isOpen()&&(r.setClasses(),r.highlightFirstItem())});i.on("results:append",function(n){r.append(n.data);i.isOpen()&&r.setClasses()});i.on("query",function(n){r.hideMessages();r.showLoading(n)});i.on("select",function(){i.isOpen()&&(r.setClasses(),r.options.get("scrollAfterSelect")&&r.highlightFirstItem())});i.on("unselect",function(){i.isOpen()&&(r.setClasses(),r.options.get("scrollAfterSelect")&&r.highlightFirstItem())});i.on("open",function(){r.$results.attr("aria-expanded","true");r.$results.attr("aria-hidden","false");r.setClasses();r.ensureHighlightVisible()});i.on("close",function(){r.$results.attr("aria-expanded","false");r.$results.attr("aria-hidden","true");r.$results.removeAttr("aria-activedescendant")});i.on("results:toggle",function(){var n=r.getHighlightedResults();0!==n.length&&n.trigger("mouseup")});i.on("results:select",function(){var n=r.getHighlightedResults(),i;0!==n.length&&(i=t.GetData(n[0],"data"),"true"==n.attr("aria-selected")?r.trigger("close",{}):r.trigger("select",{data:i}))});i.on("results:previous",function(){var i=r.getHighlightedResults(),u=r.$results.find("[aria-selected]"),f=u.index(i),n,t;if(!(f<=0)){n=f-1;0===i.length&&(n=0);t=u.eq(n);t.trigger("mouseenter");var e=r.$results.offset().top,o=t.offset().top,s=r.$results.scrollTop()+(o-e);0===n?r.$results.scrollTop(0):o-e<0&&r.$results.scrollTop(s)}});i.on("results:next",function(){var e=r.getHighlightedResults(),t=r.$results.find("[aria-selected]"),i=t.index(e)+1,n;if(!(i>=t.length)){n=t.eq(i);n.trigger("mouseenter");var u=r.$results.offset().top+r.$results.outerHeight(!1),f=n.offset().top+n.outerHeight(!1),o=r.$results.scrollTop()+f-u;0===i?r.$results.scrollTop(0):u<f&&r.$results.scrollTop(o)}});i.on("results:focus",function(n){n.element.addClass("select2-results__option--highlighted")});i.on("results:message",function(n){r.displayMessage(n)});n.fn.mousewheel&&this.$results.on("mousewheel",function(n){var t=r.$results.scrollTop(),i=r.$results.get(0).scrollHeight-t+n.deltaY,u=0<n.deltaY&&t-n.deltaY<=0,f=n.deltaY<0&&i<=r.$results.height();u?(r.$results.scrollTop(0),n.preventDefault(),n.stopPropagation()):f&&(r.$results.scrollTop(r.$results.get(0).scrollHeight-r.$results.height()),n.preventDefault(),n.stopPropagation())});this.$results.on("mouseup",".select2-results__option[aria-selected]",function(i){var f=n(this),u=t.GetData(this,"data");"true"!==f.attr("aria-selected")?r.trigger("select",{originalEvent:i,data:u}):r.options.get("multiple")?r.trigger("unselect",{originalEvent:i,data:u}):r.trigger("close",{})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var i=t.GetData(this,"data");r.getHighlightedResults().removeClass("select2-results__option--highlighted");r.trigger("results:focus",{data:i,element:n(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var n=this.getHighlightedResults();if(0!==n.length){var f=this.$results.find("[aria-selected]").index(n),t=this.$results.offset().top,i=n.offset().top,r=this.$results.scrollTop()+(i-t),u=i-t;r-=2*n.outerHeight(!1);f<=2?this.$results.scrollTop(0):(u>this.$results.outerHeight()||u<0)&&this.$results.scrollTop(r)}},i.prototype.template=function(t,i){var u=this.options.get("templateResult"),f=this.options.get("escapeMarkup"),r=u(t,i);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=f(r):n(i).append(r)},i}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var i=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"><\/span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),i.attr("title",this.$element.attr("title")),i.attr("tabindex",this._tabindex),i.attr("aria-disabled","false"),this.$selection=i},r.prototype.bind=function(n){var t=this,r=n.id+"-results";this.container=n;this.$selection.on("focus",function(n){t.trigger("focus",n)});this.$selection.on("blur",function(n){t._handleBlur(n)});this.$selection.on("keydown",function(n){t.trigger("keypress",n);n.which===i.SPACE&&n.preventDefault()});n.on("results:focus",function(n){t.$selection.attr("aria-activedescendant",n.data._resultId)});n.on("selection:update",function(n){t.update(n.data)});n.on("open",function(){t.$selection.attr("aria-expanded","true");t.$selection.attr("aria-owns",r);t._attachCloseHandler(n)});n.on("close",function(){t.$selection.attr("aria-expanded","false");t.$selection.removeAttr("aria-activedescendant");t.$selection.removeAttr("aria-owns");t.$selection.trigger("focus");t._detachCloseHandler(n)});n.on("enable",function(){t.$selection.attr("tabindex",t._tabindex);t.$selection.attr("aria-disabled","false")});n.on("disable",function(){t.$selection.attr("tabindex","-1");t.$selection.attr("aria-disabled","true")})},r.prototype._handleBlur=function(t){var i=this;window.setTimeout(function(){document.activeElement==i.$selection[0]||n.contains(i.$selection[0],document.activeElement)||i.trigger("blur",t)},1)},r.prototype._attachCloseHandler=function(i){n(document.body).on("mousedown.select2."+i.id,function(i){var r=n(i.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=r[0]&&t.GetData(this,"element").select2("close")})})},r.prototype._detachCloseHandler=function(t){n(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(n,t){t.find(".selection").append(n)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.");},r}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--single"),n.html('<span class="select2-selection__rendered"><\/span><span class="select2-selection__arrow" role="presentation"><b role="presentation"><\/b><\/span>'),n},r.prototype.bind=function(n){var i=this,t;r.__super__.bind.apply(this,arguments);t=n.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",t).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",t);this.$selection.on("mousedown",function(n){1===n.which&&i.trigger("toggle",{originalEvent:n})});this.$selection.on("focus",function(){});this.$selection.on("blur",function(){});n.on("focus",function(){n.isOpen()||i.$selection.trigger("focus")})},r.prototype.clear=function(){var n=this.$selection.find(".select2-selection__rendered");n.empty();n.removeAttr("title")},r.prototype.display=function(n,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(n,t))},r.prototype.selectionContainer=function(){return n("<span><\/span>")},r.prototype.update=function(n){var r;if(0!==n.length){var i=n[0],t=this.$selection.find(".select2-selection__rendered"),u=this.display(i,t);t.empty().append(u);r=i.title||i.text;r?t.attr("title",r):t.removeAttr("title")}else this.clear()},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--multiple"),n.html('<ul class="select2-selection__rendered"><\/ul>'),n},r.prototype.bind=function(){var t=this;r.__super__.bind.apply(this,arguments);this.$selection.on("click",function(n){t.trigger("toggle",{originalEvent:n})});this.$selection.on("click",".select2-selection__choice__remove",function(r){if(!t.options.get("disabled")){var u=n(this).parent(),f=i.GetData(u[0],"data");t.trigger("unselect",{originalEvent:r,data:f})}})},r.prototype.clear=function(){var n=this.$selection.find(".select2-selection__rendered");n.empty();n.removeAttr("title")},r.prototype.display=function(n,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(n,t))},r.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;<\/span><\/li>')},r.prototype.update=function(n){var f,r,e,o;if(this.clear(),0!==n.length){for(f=[],r=0;r<n.length;r++){var u=n[r],t=this.selectionContainer(),s=this.display(u,t);t.append(s);e=u.title||u.text;e&&t.attr("title",e);i.StoreData(t[0],"data",u);f.push(t)}o=this.$selection.find(".select2-selection__rendered");i.appendMany(o,f)}},r}),t.define("select2/selection/placeholder",["../utils"],function(){function n(n,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i)}return n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.createPlaceholder=function(n,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},n.prototype.update=function(n,t){var r=1==t.length&&t[0].id!=this.placeholder.id,i;if(1<t.length||r)return n.call(this,t);this.clear();i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},n}),t.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(n,t,i){function r(){}return r.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.");this.$selection.on("mousedown",".select2-selection__clear",function(n){r._handleClear(n)});t.on("keypress",function(n){r._handleKeyboardClear(n,t)})},r.prototype._handleClear=function(n,t){var e,u,o,r,f;if(!this.options.get("disabled")&&(e=this.$selection.find(".select2-selection__clear"),0!==e.length))if(t.stopPropagation(),u=i.GetData(e[0],"data"),o=this.$element.val(),this.$element.val(this.placeholder.id),r={data:u},this.trigger("clear",r),r.prevented)this.$element.val(o);else{for(f=0;f<u.length;f++)if(r={data:u[f]},this.trigger("unselect",r),r.prevented)return void this.$element.val(o);this.$element.trigger("change");this.trigger("toggle",{})}},r.prototype._handleKeyboardClear=function(n,i,r){r.isOpen()||i.which!=t.DELETE&&i.which!=t.BACKSPACE||this._handleClear(i)},r.prototype.update=function(t,r){if(t.call(this,r),!(0<this.$selection.find(".select2-selection__placeholder").length||0===r.length)){var f=this.options.get("translations").get("removeAllItems"),u=n('<span class="select2-selection__clear" title="'+f()+'">&times;<\/span>');i.StoreData(u[0],"data",r);this.$selection.find(".select2-selection__rendered").prepend(u)}},r}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(n,t,i){function r(n,t,i){n.call(this,t,i)}return r.prototype.render=function(t){var i=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /><\/li>'),r;return this.$searchContainer=i,this.$search=i.find("input"),r=t.call(this),this._transferTabIndex(),r},r.prototype.bind=function(n,r,u){var f=this,s=r.id+"-results",e,o;n.call(this,r,u);r.on("open",function(){f.$search.attr("aria-controls",s);f.$search.trigger("focus")});r.on("close",function(){f.$search.val("");f.$search.removeAttr("aria-controls");f.$search.removeAttr("aria-activedescendant");f.$search.trigger("focus")});r.on("enable",function(){f.$search.prop("disabled",!1);f._transferTabIndex()});r.on("disable",function(){f.$search.prop("disabled",!0)});r.on("focus",function(){f.$search.trigger("focus")});r.on("results:focus",function(n){n.data._resultId?f.$search.attr("aria-activedescendant",n.data._resultId):f.$search.removeAttr("aria-activedescendant")});this.$selection.on("focusin",".select2-search--inline",function(n){f.trigger("focus",n)});this.$selection.on("focusout",".select2-search--inline",function(n){f._handleBlur(n)});this.$selection.on("keydown",".select2-search--inline",function(n){var r,u;(n.stopPropagation(),f.trigger("keypress",n),f._keyUpPrevented=n.isDefaultPrevented(),n.which===i.BACKSPACE&&""===f.$search.val())&&(r=f.$searchContainer.prev(".select2-selection__choice"),0<r.length&&(u=t.GetData(r[0],"data"),f.searchRemoveChoice(u),n.preventDefault()))});this.$selection.on("click",".select2-search--inline",function(n){f.$search.val()&&n.stopPropagation()});e=document.documentMode;o=e&&e<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(){o?f.$selection.off("input.search input.searchcheck"):f.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(n){if(o&&"input"===n.type)f.$selection.off("input.search input.searchcheck");else{var t=n.which;t!=i.SHIFT&&t!=i.CTRL&&t!=i.ALT&&t!=i.TAB&&f.handleSearch(n)}})},r.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")},r.prototype.createPlaceholder=function(n,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(n,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");n.call(this,t);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();i&&this.$search.trigger("focus")},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(n,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()},r.prototype.resizeSearch=function(){this.$search.css("width","25px");var n="";n=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").width():.75*(this.$search.val().length+1)+"em";this.$search.css("width",n)},r}),t.define("select2/selection/eventRelay",["jquery"],function(n){function t(){}return t.prototype.bind=function(t,i,r){var u=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],e=["opening","closing","selecting","unselecting","clearing"];t.call(this,i,r);i.on("*",function(t,i){if(-1!==n.inArray(t,f)){i=i||{};var r=n.Event("select2:"+t,{params:i});u.$element.trigger(r);-1!==n.inArray(t,e)&&(i.prevented=r.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(n,t){function i(n){this.dict=n||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(n){return this.dict[n]},i.prototype.extend=function(t){this.dict=n.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(n){if(!(n in i._cache)){var r=t(n);i._cache[n]=r}return new i(i._cache[n])},i}),t.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}}),t.define("select2/data/base",["../utils"],function(n){function t(){t.__super__.constructor.call(this)}return n.Extend(t,n.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.");},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.");},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var r=t.id+"-result-";return r+=n.generateChars(4),r+=null!=i.id?"-"+i.id.toString():"-"+n.generateChars(4),r},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,n),r.prototype.current=function(n){var t=[],r=this;this.$element.find(":selected").each(function(){var n=i(this),u=r.item(n);t.push(u)});n(t)},r.prototype.select=function(n){var t=this,r;if(n.selected=!0,i(n.element).is("option"))return n.element.selected=!0,void this.$element.trigger("change");this.$element.prop("multiple")?this.current(function(r){var f=[],u,e;for((n=[n]).push.apply(n,r),u=0;u<n.length;u++)e=n[u].id,-1===i.inArray(e,f)&&f.push(e);t.$element.val(f);t.$element.trigger("change")}):(r=n.id,this.$element.val(r),this.$element.trigger("change"))},r.prototype.unselect=function(n){var t=this;if(this.$element.prop("multiple")){if(n.selected=!1,i(n.element).is("option"))return n.element.selected=!1,void this.$element.trigger("change");this.current(function(r){for(var e,u=[],f=0;f<r.length;f++)e=r[f].id,e!==n.id&&-1===i.inArray(e,u)&&u.push(e);t.$element.val(u);t.$element.trigger("change")})}},r.prototype.bind=function(n){var t=this;(this.container=n).on("select",function(n){t.select(n.data)});n.on("unselect",function(n){t.unselect(n.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){t.RemoveData(this)})},r.prototype.query=function(n,t){var r=[],u=this;this.$element.children().each(function(){var t=i(this),e,f;(t.is("option")||t.is("optgroup"))&&(e=u.item(t),f=u.matches(n,e),null!==f&&r.push(f))});t({results:r})},r.prototype.addOptions=function(n){t.appendMany(this.$element,n)},r.prototype.option=function(n){var r,f,u;return n.children?(r=document.createElement("optgroup")).label=n.text:void 0!==(r=document.createElement("option")).textContent?r.textContent=n.text:r.innerText=n.text,void 0!==n.id&&(r.value=n.id),n.disabled&&(r.disabled=!0),n.selected&&(r.selected=!0),n.title&&(r.title=n.title),f=i(r),u=this._normalizeItem(n),u.element=r,t.StoreData(r,"data",u),f},r.prototype.item=function(n){var r={},o,s;if(null!=(r=t.GetData(n[0],"data")))return r;if(n.is("option"))r={id:n.val(),text:n.text(),disabled:n.prop("disabled"),selected:n.prop("selected"),title:n.prop("title")};else if(n.is("optgroup")){r={text:n.prop("label"),children:[],title:n.prop("title")};for(var f=n.children("option"),e=[],u=0;u<f.length;u++)o=i(f[u]),s=this.item(o),e.push(s);r.children=e}return(r=this._normalizeItem(r)).element=n[0],t.StoreData(n[0],"data",r),r},r.prototype._normalizeItem=function(n){return n!==Object(n)&&(n={id:n,text:n}),null!=(n=i.extend({},{text:""},n)).id&&(n.id=n.id.toString()),null!=n.text&&(n.text=n.text.toString()),null==n._resultId&&n.id&&null!=this.container&&(n._resultId=this.generateResultId(this.container,n)),i.extend({},{selected:!1,disabled:!1},n)},r.prototype.matches=function(n,t){return this.options.get("matcher")(n,t)},r}),t.define("select2/data/array",["./select","../utils","jquery"],function(n,t,i){function r(n,t){this._dataToConvert=t.get("data")||[];r.__super__.constructor.call(this,n,t)}return t.Extend(r,n),r.prototype.bind=function(n,t){r.__super__.bind.call(this,n,t);this.addOptions(this.convertToOptions(this._dataToConvert))},r.prototype.select=function(n){var t=this.$element.find("option").filter(function(t,i){return i.value==n.id.toString()});0===t.length&&(t=this.option(n),this.addOptions(t));r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(n){function a(n){return function(){return i(this).val()==n.id}}for(var r,f,h,c=this,e=this.$element.find("option"),l=e.map(function(){return c.item(i(this)).id}).get(),o=[],u=0;u<n.length;u++)if(r=this._normalizeItem(n[u]),0<=i.inArray(r.id,l)){var s=e.filter(a(r)),v=this.item(s),y=i.extend(!0,{},r,v),p=this.option(y);s.replaceWith(p)}else f=this.option(r),r.children&&(h=this.convertToOptions(r.children),t.appendMany(f,h)),o.push(f);return o},r}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(n,t,i){function r(n,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults);r.__super__.constructor.call(this,n,t)}return t.Extend(r,n),r.prototype._applyDefaults=function(n){var t={data:function(n){return i.extend({},n,{q:n.term})},transport:function(n,t,r){var u=i.ajax(n);return u.then(t),u.fail(r),u}};return i.extend({},t,n,!0)},r.prototype.processResults=function(n){return n},r.prototype.query=function(n,t){function f(){var f=r.transport(r,function(r){var f=u.processResults(r,n);u.options.get("debug")&&window.console&&console.error&&(f&&f.results&&i.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response."));t(f)},function(){"status"in f&&(0===f.status||"0"===f.status)||u.trigger("results:message",{message:"errorLoading"})});u._request=f}var u=this,r;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);r=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url.call(this.$element,n));"function"==typeof r.data&&(r.data=r.data.call(this.$element,n));this.ajaxOptions.delay&&null!=n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(f,this.ajaxOptions.delay)):f()},r}),t.define("select2/data/tags",["jquery"],function(n){function t(t,i,r){var f=r.get("tags"),o=r.get("createTag"),e,u;if(void 0!==o&&(this.createTag=o),e=r.get("insertTag"),void 0!==e&&(this.insertTag=e),t.call(this,i,r),n.isArray(f))for(u=0;u<f.length;u++){var s=f[u],h=this._normalizeItem(s),c=this.option(h);this.$element.append(c)}}return t.prototype.query=function(n,t,i){var r=this;this._removeOldTags();null!=t.term&&null==t.page?n.call(this,t,function n(u,f){for(var s,l,h,c,e=u.results,o=0;o<e.length;o++)if(s=e[o],l=null!=s.children&&!n({results:s.children},!0),(s.text||"").toUpperCase()===(t.term||"").toUpperCase()||l)return!f&&(u.data=e,void i(u));if(f)return!0;h=r.createTag(t);null!=h&&(c=r.option(h),c.attr("data-select2-tag",!0),r.addOptions([c]),r.insertTag(e,h));u.results=e;i(u)}):n.call(this,t,i)},t.prototype.createTag=function(t,i){var r=n.trim(i.term);return""===r?null:{id:r,text:r}},t.prototype.insertTag=function(n,t,i){t.unshift(i)},t.prototype._removeOldTags=function(){this.$element.find("option[data-select2-tag]").each(function(){this.selected||n(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(n){function t(n,t,i){var r=i.get("tokenizer");void 0!==r&&(this.tokenizer=r);n.call(this,t,i)}return t.prototype.bind=function(n,t,i){n.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(t,i,r){var u=this,f;i.term=i.term||"";f=this.tokenizer(i,this.options,function(t){var i=u._normalizeItem(t),r;u.$element.find("option").filter(function(){return n(this).val()===i.id}).length||(r=u.option(i),r.attr("data-select2-tag",!0),u._removeOldTags(),u.addOptions([r]));!function(n){u.trigger("select",{data:n})}(i)});f.term!==i.term&&(this.$search.length&&(this.$search.val(f.term),this.$search.trigger("focus")),i.term=f.term);t.call(this,i,r)},t.prototype.tokenizer=function(t,i,r,u){for(var s,h,o,c=r.get("tokenSeparators")||[],e=i.term,f=0,l=this.createTag||function(n){return{id:n.term,text:n.term}};f<e.length;)s=e[f],-1!==n.inArray(s,c)?(h=e.substr(0,f),o=l(n.extend({},i,{term:h})),null!=o?(u(o),e=e.substr(f+1)||"",f=0):f++):f++;return{term:e}},t}),t.define("select2/data/minimumInputLength",[],function(){function n(n,t,i){this.minimumInputLength=i.get("minimumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.term=t.term||"";t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):n.call(this,t,i)},n}),t.define("select2/data/maximumInputLength",[],function(){function n(n,t,i){this.maximumInputLength=i.get("maximumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.term=t.term||"";0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):n.call(this,t,i)},n}),t.define("select2/data/maximumSelectionLength",[],function(){function n(n,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");n.call(this,t,i)}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(){r._checkIfMaximumSelected()})},n.prototype.query=function(n,t,i){var r=this;this._checkIfMaximumSelected(function(){n.call(r,t,i)})},n.prototype._checkIfMaximumSelected=function(n,t){var i=this;this.current(function(n){var r=null!=n?n.length:0;0<i.maximumSelectionLength&&r>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):t&&t()})},n}),t.define("select2/dropdown",["jquery","./utils"],function(n,t){function i(n,t){this.$element=n;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<span class="select2-dropdown"><span class="select2-results"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t},i.prototype.bind=function(){},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery","../utils"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=n('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /><\/span>');return this.$searchContainer=i,this.$search=i.find("input"),r.prepend(i),r},t.prototype.bind=function(t,i,r){var u=this,f=i.id+"-results";t.call(this,i,r);this.$search.on("keydown",function(n){u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented()});this.$search.on("input",function(){n(this).off("keyup")});this.$search.on("keyup input",function(n){u.handleSearch(n)});i.on("open",function(){u.$search.attr("tabindex",0);u.$search.attr("aria-controls",f);u.$search.trigger("focus");window.setTimeout(function(){u.$search.trigger("focus")},0)});i.on("close",function(){u.$search.attr("tabindex",-1);u.$search.removeAttr("aria-controls");u.$search.removeAttr("aria-activedescendant");u.$search.val("");u.$search.trigger("blur")});i.on("focus",function(){i.isOpen()||u.$search.trigger("focus")});i.on("results:all",function(n){null!=n.query.term&&""!==n.query.term||(u.showSearch(n)?u.$searchContainer.removeClass("select2-search--hide"):u.$searchContainer.addClass("select2-search--hide"))});i.on("results:focus",function(n){n.data._resultId?u.$search.attr("aria-activedescendant",n.data._resultId):u.$search.removeAttr("aria-activedescendant")})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t}),t.define("select2/dropdown/hidePlaceholder",[],function(){function n(n,t,i,r){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i,r)}return n.prototype.append=function(n,t){t.results=this.removePlaceholder(t.results);n.call(this,t)},n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.removePlaceholder=function(n,t){for(var u,r=t.slice(0),i=t.length-1;0<=i;i--)u=t[i],this.placeholder.id===u.id&&r.splice(i,1);return r},n}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function t(n,t,i,r){this.lastParams={};n.call(this,t,i,r);this.$loadingMore=this.createLoadingMore();this.loading=!1}return t.prototype.append=function(n,t){this.$loadingMore.remove();this.loading=!1;n.call(this,t);this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},t.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("query",function(n){r.lastParams=n;r.loading=!0});t.on("query:append",function(n){r.lastParams=n;r.loading=!0});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},t.prototype.loadMoreIfNeeded=function(){var i=n.contains(document.documentElement,this.$loadingMore[0]),t;!this.loading&&i&&(t=this.$results.offset().top+this.$results.outerHeight(!1),this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=t+50&&this.loadMore())},t.prototype.loadMore=function(){this.loading=!0;var t=n.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)},t.prototype.showLoadingMore=function(n,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"><\/li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(n,t){function i(t,i,r){this.$dropdownParent=n(r.get("dropdownParent")||document.body);t.call(this,i,r)}return i.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("open",function(){r._showDropdown();r._attachPositioningHandler(t);r._bindContainerResultHandlers(t)});t.on("close",function(){r._hideDropdown();r._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(n){n.stopPropagation()})},i.prototype.destroy=function(n){n.call(this);this.$dropdownContainer.remove()},i.prototype.position=function(n,t,i){t.attr("class",i.attr("class"));t.removeClass("select2");t.addClass("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i},i.prototype.render=function(t){var i=n("<span><\/span>"),r=t.call(this);return i.append(r),this.$dropdownContainer=i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._bindContainerResultHandlers=function(n,t){if(!this._containerResultsHandlersBound){var i=this;t.on("results:all",function(){i._positionDropdown();i._resizeDropdown()});t.on("results:append",function(){i._positionDropdown();i._resizeDropdown()});t.on("results:message",function(){i._positionDropdown();i._resizeDropdown()});t.on("select",function(){i._positionDropdown();i._resizeDropdown()});t.on("unselect",function(){i._positionDropdown();i._resizeDropdown()});this._containerResultsHandlersBound=!0}},i.prototype._attachPositioningHandler=function(i,r){var u=this,f="scroll.select2."+r.id,o="resize.select2."+r.id,s="orientationchange.select2."+r.id,e=this.$container.parents().filter(t.hasScroll);e.each(function(){t.StoreData(this,"select2-scroll-position",{x:n(this).scrollLeft(),y:n(this).scrollTop()})});e.on(f,function(){var i=t.GetData(this,"select2-scroll-position");n(this).scrollTop(i.y)});n(window).on(f+" "+o+" "+s,function(){u._positionDropdown();u._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i,r){var u="scroll.select2."+r.id,f="resize.select2."+r.id,e="orientationchange.select2."+r.id;this.$container.parents().filter(t.hasScroll).off(u);n(window).off(u+" "+f+" "+e)},i.prototype._positionDropdown=function(){var s=n(window),u=this.$dropdown.hasClass("select2-dropdown--above"),a=this.$dropdown.hasClass("select2-dropdown--below"),t=null,i=this.$container.offset(),r,o;i.bottom=i.top+this.$container.outerHeight(!1);r={height:this.$container.outerHeight(!1)};r.top=i.top;r.bottom=i.top+r.height;var h=this.$dropdown.outerHeight(!1),v=s.scrollTop(),y=s.scrollTop()+s.height(),c=v<i.top-h,l=y>i.bottom+h,f={left:i.left,top:r.bottom},e=this.$dropdownParent;"static"===e.css("position")&&(e=e.offsetParent());o=e.offset();f.top-=o.top;f.left-=o.left;u||a||(t="below");l||!c||u?!c&&l&&u&&(t="below"):t="above";("above"==t||u&&"below"!==t)&&(f.top=r.top-o.top-h);null!=t&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+t),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+t));this.$dropdownContainer.css(f)},i.prototype._resizeDropdown=function(){var n={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(n.minWidth=n.width,n.position="relative",n.width="auto");this.$dropdown.css(n)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()},i}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function n(n,t,i,r){this.minimumResultsForSearch=i.get("minimumResultsForSearch");this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0);n.call(this,t,i,r)}return n.prototype.showSearch=function(n,t){return!(function n(t){for(var u,i=0,r=0;r<t.length;r++)u=t[r],u.children?i+=n(u.children):i++;return i}(t.data.results)<this.minimumResultsForSearch)&&n.call(this,t)},n}),t.define("select2/dropdown/selectOnClose",["../utils"],function(n){function t(){}return t.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("close",function(n){r._handleSelectOnClose(n)})},t.prototype._handleSelectOnClose=function(t,i){var u,f,r;i&&null!=i.originalSelect2Event&&(u=i.originalSelect2Event,"select"===u._type||"unselect"===u._type)||(f=this.getHighlightedResults(),f.length<1||(r=n.GetData(f[0],"data"),null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})))},t}),t.define("select2/dropdown/closeOnSelect",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(n){r._selectTriggered(n)});t.on("unselect",function(n){r._selectTriggered(n)})},n.prototype._selectTriggered=function(n,t){var i=t.originalEvent;i&&(i.ctrlKey||i.metaKey)||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},n}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(n){var t=n.input.length-n.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(n){return"Please enter "+(n.minimum-n.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(n){var t="You can only select "+n.maximum+" item";return 1!=n.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et){function ot(){this.reset()}return ot.prototype.apply=function(c){var ht,ct,lt,at,vt,l,ot,st;for(null==(c=n.extend(!0,{},this.defaults,c)).dataAdapter&&((c.dataAdapter=null!=c.ajax?y:null!=c.data?v:a,0<c.minimumInputLength&&(c.dataAdapter=h.Decorate(c.dataAdapter,b)),0<c.maximumInputLength&&(c.dataAdapter=h.Decorate(c.dataAdapter,k)),0<c.maximumSelectionLength&&(c.dataAdapter=h.Decorate(c.dataAdapter,d)),c.tags&&(c.dataAdapter=h.Decorate(c.dataAdapter,p)),null==c.tokenSeparators&&null==c.tokenizer||(c.dataAdapter=h.Decorate(c.dataAdapter,w)),null!=c.query)&&(ht=t(c.amdBase+"compat/query"),c.dataAdapter=h.Decorate(c.dataAdapter,ht)),null!=c.initSelection&&(ct=t(c.amdBase+"compat/initSelection"),c.dataAdapter=h.Decorate(c.dataAdapter,ct))),(null==c.resultsAdapter&&(c.resultsAdapter=i,null!=c.ajax&&(c.resultsAdapter=h.Decorate(c.resultsAdapter,it)),null!=c.placeholder&&(c.resultsAdapter=h.Decorate(c.resultsAdapter,tt)),c.selectOnClose&&(c.resultsAdapter=h.Decorate(c.resultsAdapter,ft))),null==c.dropdownAdapter)&&(c.multiple?c.dropdownAdapter=g:(lt=h.Decorate(g,nt),c.dropdownAdapter=lt),(0!==c.minimumResultsForSearch&&(c.dropdownAdapter=h.Decorate(c.dropdownAdapter,ut)),c.closeOnSelect&&(c.dropdownAdapter=h.Decorate(c.dropdownAdapter,et)),null!=c.dropdownCssClass||null!=c.dropdownCss||null!=c.adaptDropdownCssClass)&&(at=t(c.amdBase+"compat/dropdownCss"),c.dropdownAdapter=h.Decorate(c.dropdownAdapter,at)),c.dropdownAdapter=h.Decorate(c.dropdownAdapter,rt)),null==c.selectionAdapter&&((c.selectionAdapter=c.multiple?u:r,null!=c.placeholder&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,f)),c.allowClear&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,e)),c.multiple&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,o)),null!=c.containerCssClass||null!=c.containerCss||null!=c.adaptContainerCssClass)&&(vt=t(c.amdBase+"compat/containerCss"),c.selectionAdapter=h.Decorate(c.selectionAdapter,vt)),c.selectionAdapter=h.Decorate(c.selectionAdapter,s)),c.language=this._resolveLanguage(c.language),c.language.push("en"),l=[],ot=0;ot<c.language.length;ot++)st=c.language[ot],-1===l.indexOf(st)&&l.push(st);return c.language=l,c.translations=this._processTranslations(c.language,c.debug),c},ot.prototype.reset=function(){function t(n){return n.replace(/[^\u0000-\u007E]/g,function(n){return l[n]||n})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:{},matcher:function i(r,u){var f,e,o,s;if(""===n.trim(r.term))return u;if(u.children&&0<u.children.length){for(f=n.extend(!0,{},u),e=u.children.length-1;0<=e;e--)null==i(r,u.children[e])&&f.children.splice(e,1);return 0<f.children.length?f:i(r,f)}return o=t(u.text).toUpperCase(),s=t(r.term).toUpperCase(),-1<o.indexOf(s)?u:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(n){return n},templateResult:function(n){return n.text},templateSelection:function(n){return n.text},theme:"default",width:"resolve"}},ot.prototype.applyFromElement=function(n,t){var i=n.language,r=this.defaults.language,u=t.prop("lang"),f=t.closest("[lang]").prop("lang"),e=Array.prototype.concat.call(this._resolveLanguage(u),this._resolveLanguage(i),this._resolveLanguage(r),this._resolveLanguage(f));return n.language=e,n},ot.prototype._resolveLanguage=function(t){var r,u,i,f;if(!t)return[];if(n.isEmptyObject(t))return[];if(n.isPlainObject(t))return[t];for(r=n.isArray(t)?t:[t],u=[],i=0;i<r.length;i++)(u.push(r[i]),"string"==typeof r[i]&&0<r[i].indexOf("-"))&&(f=r[i].split("-")[0],u.push(f));return u},ot.prototype._processTranslations=function(t,i){for(var u,r,e=new c,f=0;f<t.length;f++){if(u=new c,r=t[f],"string"==typeof r)try{u=c.loadPath(r)}catch(t){try{r=this.defaults.amdLanguageBase+r;u=c.loadPath(r)}catch(t){i&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.')}}else u=n.isPlainObject(r)?new c(r):r;e.extend(u)}return e},ot.prototype.set=function(t,i){var r={},u;r[n.camelCase(t)]=i;u=h._convertData(r);n.extend(!0,this.defaults,u)},new ot}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(n,t,i,r){function u(t,u){if(this.options=t,null!=u&&this.fromElement(u),null!=u&&(this.options=i.applyFromElement(this.options,u)),this.options=i.apply(this.options),u&&u.is("input")){var f=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,f)}}return u.prototype.fromElement=function(n){function a(n,t){return t.toUpperCase()}var l=["select2"],u,e,s,o,h,c,f,i;for(null==this.options.multiple&&(this.options.multiple=n.prop("multiple")),null==this.options.disabled&&(this.options.disabled=n.prop("disabled")),null==this.options.dir&&(this.options.dir=n.prop("dir")?n.prop("dir"):n.closest("[dir]").prop("dir")?n.closest("[dir]").prop("dir"):"ltr"),n.prop("disabled",this.options.disabled),n.prop("multiple",this.options.multiple),r.GetData(n[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),r.StoreData(n[0],"data",r.GetData(n[0],"select2Tags")),r.StoreData(n[0],"tags",!0)),r.GetData(n[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),n.attr("ajax--url",r.GetData(n[0],"ajaxUrl")),r.StoreData(n[0],"ajax-Url",r.GetData(n[0],"ajaxUrl"))),u={},e=0;e<n[0].attributes.length;e++)s=n[0].attributes[e].name,o="data-",s.substr(0,o.length)==o&&(h=s.substring(o.length),c=r.GetData(n[0],h),u[h.replace(/-([a-z])/g,a)]=c);t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&n[0].dataset&&(u=t.extend(!0,{},n[0].dataset,u));f=t.extend(!0,{},r.GetData(n[0]),u);for(i in f=r._convertData(f))-1<t.inArray(i,l)||(t.isPlainObject(this.options[i])?t.extend(this.options[i],f[i]):this.options[i]=f[i]);return this},u.prototype.get=function(n){return this.options[n]},u.prototype.set=function(n,t){this.options[n]=t},u}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(n,t,i,r){var u=function(n,r){var e,o,f,s,h,c,l;null!=i.GetData(n[0],"select2")&&i.GetData(n[0],"select2").destroy();this.$element=n;this.id=this._generateId(n);r=r||{};this.options=new t(r,n);u.__super__.constructor.call(this);e=n.attr("tabindex")||0;i.StoreData(n[0],"old-tabindex",e);n.attr("tabindex","-1");o=this.options.get("dataAdapter");this.dataAdapter=new o(n,this.options);f=this.render();this._placeContainer(f);s=this.options.get("selectionAdapter");this.selection=new s(n,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,f);h=this.options.get("dropdownAdapter");this.dropdown=new h(n,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,f);c=this.options.get("resultsAdapter");this.results=new c(n,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);l=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(n){l.trigger("selection:update",{data:n})});n.addClass("select2-hidden-accessible");n.attr("aria-hidden","true");this._syncAttributes();i.StoreData(n[0],"select2",this);n.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(n){return"select2-"+(null!=n.attr("id")?n.attr("id"):null!=n.attr("name")?n.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},u.prototype._placeContainer=function(n){n.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&n.css("width",t)},u.prototype._resolveWidth=function(n,t){var r,u,f,i;if("resolve"==t)return r=this._resolveWidth(n,"style"),null!=r?r:this._resolveWidth(n,"element");if("element"==t)return u=n.outerWidth(!1),u<=0?"auto":u+"px";if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(n[0]).width;if(f=n.attr("style"),"string"!=typeof f)return null;for(var o=f.split(";"),e=0,s=o.length;e<s;e+=1)if(i=o[e].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&1<=i.length)return i[1];return null},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var t=this,r;this.$element.on("change.select2",function(){t.dataAdapter.current(function(n){t.trigger("selection:update",{data:n})})});this.$element.on("focus.select2",function(n){t.trigger("focus",n)});this._syncA=i.bind(this._syncAttributes,this);this._syncS=i.bind(this._syncSubtree,this);this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=r?(this._observer=new r(function(i){n.each(i,t._syncA);n.each(i,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},u.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerSelectionEvents=function(){var t=this,i=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()});this.selection.on("focus",function(n){t.focus(n)});this.selection.on("*",function(r,u){-1===n.inArray(r,i)&&t.trigger(r,u)})},u.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")});this.on("close",function(){n.$container.removeClass("select2-container--open")});this.on("enable",function(){n.$container.removeClass("select2-container--disabled")});this.on("disable",function(){n.$container.addClass("select2-container--disabled")});this.on("blur",function(){n.$container.removeClass("select2-container--focus")});this.on("query",function(t){n.isOpen()||n.trigger("open",{});this.dataAdapter.query(t,function(i){n.trigger("results:all",{data:i,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(i){n.trigger("results:append",{data:i,query:t})})});this.on("keypress",function(t){var i=t.which;n.isOpen()?i===r.ESC||i===r.TAB||i===r.UP&&t.altKey?(n.close(),t.preventDefault()):i===r.ENTER?(n.trigger("results:select",{}),t.preventDefault()):i===r.SPACE&&t.ctrlKey?(n.trigger("results:toggle",{}),t.preventDefault()):i===r.UP?(n.trigger("results:previous",{}),t.preventDefault()):i===r.DOWN&&(n.trigger("results:next",{}),t.preventDefault()):(i===r.ENTER||i===r.SPACE||i===r.DOWN&&t.altKey)&&(n.open(),t.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},u.prototype._syncSubtree=function(n,t){var i=!1,u=this,r;if(!n||!n.target||"OPTION"===n.target.nodeName||"OPTGROUP"===n.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(r=0;r<t.addedNodes.length;r++)t.addedNodes[r].selected&&(i=!0);else t.removedNodes&&0<t.removedNodes.length&&(i=!0);else i=!0;i&&this.dataAdapter.current(function(n){u.trigger("selection:update",{data:n})})}},u.prototype.trigger=function(n,t){var r=u.__super__.trigger,f={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"},e,i;if((void 0===t&&(t={}),n in f)&&(e=f[n],i={prevented:!1,name:n,args:t},r.call(this,e,i),i.prevented))return void(t.prevented=!0);r.call(this,n,t)},u.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||this.trigger("query",{})},u.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},u.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},u.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},u.prototype.focus=function(){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},u.prototype.enable=function(n){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');null!=n&&0!==n.length||(n=[!0]);var t=!n[0];this.$element.prop("disabled",t)},u.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var n=[];return this.dataAdapter.current(function(t){n=t}),n},u.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var i=t[0];n.isArray(i)&&(i=n.map(i,function(n){return n.toString()}));this.$element.val(i).trigger("change")},u.prototype.destroy=function(){this.$container.remove();this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA);null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1));this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");i.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null},u.prototype.render=function(){var t=n('<span class="select2 select2-container"><span class="selection"><\/span><span class="dropdown-wrapper" aria-hidden="true"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),i.StoreData(t[0],"element",this.$element),t},u}),t.define("select2/compat/utils",["jquery"],function(n){return{syncCssClasses:function(t,i,r){var u,e,f=[];(u=n.trim(t.attr("class")))&&n((u=""+u).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&f.push(this)});(u=n.trim(i.attr("class")))&&n((u=""+u).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(e=r(this))&&f.push(e)});t.attr("class",f.join(" "))}}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("containerCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptContainerCssClass"),(f=f||r,-1!==u.indexOf(":all:"))&&(u=u.replace(":all:",""),s=f,f=function(n){var t=s(n);return null!=t?t+" "+n:n}),e=this.options.get("containerCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("dropdownCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptDropdownCssClass"),(f=f||r,-1!==u.indexOf(":all:"))&&(u=u.replace(":all:",""),s=f,f=function(n){var t=s(n);return null!=t?t+" "+n:n}),e=this.options.get("dropdownCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i}),t.define("select2/compat/initSelection",["jquery"],function(n){function t(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2");this.initSelection=i.get("initSelection");this._isInitialized=!1;n.call(this,t,i)}return t.prototype.current=function(t,i){var r=this;this._isInitialized?t.call(this,i):this.initSelection.call(null,this.$element,function(t){r._isInitialized=!0;n.isArray(t)||(t=[t]);i(t)})},t}),t.define("select2/compat/inputData",["jquery","../utils"],function(n,t){function i(n,t,i){this._currentData=[];this._valueSeparator=i.get("valueSeparator")||",";"hidden"===t.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead.");n.call(this,t,i)}return i.prototype.current=function(t,i){function f(t,i){var r=[];return t.selected||-1!==n.inArray(t.id,i)?(t.selected=!0,r.push(t)):t.selected=!1,t.children&&r.push.apply(r,f(t.children,i)),r}for(var e,r=[],u=0;u<this._currentData.length;u++)e=this._currentData[u],r.push.apply(r,f(e,this.$element.val().split(this._valueSeparator)));i(r)},i.prototype.select=function(t,i){if(this.options.get("multiple")){var r=this.$element.val();r+=this._valueSeparator+i.id;this.$element.val(r);this.$element.trigger("change")}else this.current(function(t){n.map(t,function(n){n.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},i.prototype.unselect=function(n,t){var i=this;t.selected=!1;this.current(function(n){for(var f,u=[],r=0;r<n.length;r++)f=n[r],t.id!=f.id&&u.push(f.id);i.$element.val(u.join(i._valueSeparator));i.$element.trigger("change")})},i.prototype.query=function(n,t,i){for(var e,f,u=[],r=0;r<this._currentData.length;r++)e=this._currentData[r],f=this.matches(t,e),null!==f&&u.push(f);i({results:u})},i.prototype.addOptions=function(i,r){var u=n.map(r,function(n){return t.GetData(n[0],"data")});this._currentData.push.apply(this._currentData,u)},i}),t.define("select2/compat/matcher",["jquery"],function(n){return function(t){return function(i,r){var u=n.extend(!0,{},r),f,e;if(null==i.term||""===n.trim(i.term))return u;if(r.children){for(f=r.children.length-1;0<=f;f--)e=r.children[f],t(i.term,e.text,e)||u.children.splice(f,1);if(0<u.children.length)return u}return t(i.term,r.text,r)?u:null}}}),t.define("select2/compat/query",[],function(){function n(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2.");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.callback=i;this.options.get("query").call(null,t)},n}),t.define("select2/dropdown/attachContainer",[],function(){function n(n,t,i){n.call(this,t,i)}return n.prototype.position=function(n,t,i){i.find(".dropdown-wrapper").append(t);t.addClass("select2-dropdown--below");i.addClass("select2-container--below")},n}),t.define("select2/dropdown/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$dropdown.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n}),t.define("select2/selection/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$selection.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n}),l=function(n){function e(r){var a,f=r||window.event,w=h.call(arguments,1),l=0,o=0,e=0,b=0,k=0,v,y,p;if((r=n.event.fix(f)).type="mousewheel","detail"in f&&(e=-1*f.detail),"wheelDelta"in f&&(e=f.wheelDelta),"wheelDeltaY"in f&&(e=f.wheelDeltaY),"wheelDeltaX"in f&&(o=-1*f.wheelDeltaX),"axis"in f&&f.axis===f.HORIZONTAL_AXIS&&(o=-1*e,e=0),l=0===e?o:e,"deltaY"in f&&(l=e=-1*f.deltaY),"deltaX"in f&&(o=f.deltaX,0===e&&(l=-1*o)),0!==e||0!==o)return 1===f.deltaMode?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,o*=v):2===f.deltaMode&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,o*=y),(a=Math.max(Math.abs(e),Math.abs(o)),(!t||a<t)&&s(f,t=a)&&(t/=40),s(f,a)&&(l/=40,o/=40,e/=40),l=Math[1<=l?"floor":"ceil"](l/t),o=Math[1<=o?"floor":"ceil"](o/t),e=Math[1<=e?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect)&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=o,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,o,e),u&&clearTimeout(u),u=setTimeout(c,200),(n.event.dispatch||n.event.handle).apply(this,w)}function c(){t=null}function s(n,t){return i.settings.adjustOldDeltas&&"mousewheel"===n.type&&t%120==0}var u,t,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,f,i;if(n.event.fixHooks)for(f=o.length;f;)n.event.fixHooks[o[--f]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],e,!1);else this.onmousewheel=e;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],e,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})},"function"==typeof t.define&&t.define.amd?t.define("jquery-mousewheel",["jquery"],l):"object"==typeof exports?module.exports=l:l(n),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(n,t,i,r,u){if(null==n.fn.select2){var f=["open","close","destroy"];n.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var r=n.extend(!0,{},t);new i(n(this),r)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var r,e=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=u.GetData(this,"select2");null==n&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2.");r=n[t].apply(n,e)}),-1<n.inArray(t,f)?this:r}}return null==n.fn.select2.defaults&&(n.fn.select2.defaults=r),i}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return n.fn.select2.amd=t,i});var PROFILEEDIT=function(){"use strict";function v(){y();p();w()}function y(){t.form="#frmProfileSave";t.UserId="#UserId";t.modalCropAvatar="#modalCropAvatar";t.modalCropCoverImage="#modalCropCoverImage";t.profileImageUrl="#ProfileImageUrl";t.coverImage="#CoverImageUrl";t.btnClearExternalLink=".btnClearExternalLink";t.country="#Country";t.location="#Location"}function p(){n.form=$(t.form);n.UserId=$(t.UserId);n.modalCropAvatar=$(t.modalCropAvatar);n.modalCropCoverImage=$(t.modalCropCoverImage);n.profileImageUrl=$(t.profileImageUrl);n.coverImage=$(t.coverImage);n.country=$(t.country);n.location=$(t.location)}function w(){d();g();nt();b();k();MAINMODULE.Common.BindPopOvers()}function b(){n.form.on("click",t.btnClearExternalLink,function(){$(this).closest(".input-group").find("input[type=text]").val("")})}function k(){n.country.select2()}function d(){var t=document.getElementById("imgAvatar"),r=document.getElementById("avatarCropArea"),e=document.getElementById("avatar");e.addEventListener("change",function(t){i!==undefined&&i.destroy();var f=t.target.files,s=function(t){e.value="";r.src=t;n.modalCropAvatar.modal("show")},u,o;f&&f.length>0&&(o=f[0],URL?s(URL.createObjectURL(o)):FileReader&&(u=new FileReader,u.onload=function(n){console.log(n.target.result);console.log(u.result);s(u.result)},u.readAsDataURL(o)))});n.modalCropAvatar.on("shown.bs.modal",function(){i=new Cropper(r,{aspectRatio:1,viewMode:3,autoCropArea:1})});document.getElementById("cropAvatar").addEventListener("click",function(){f=!0;i&&(u=i.getCroppedCanvas({width:256,minWidth:256}),h=t.src,t.src=u.toDataURL());n.modalCropAvatar.modal("hide")})}function l(t){if(i&&u){var r=document.getElementById("UserId").value,f=n.profileImageUrl.val();u.toBlob(function(u){var e=new FormData;e.append("image",u);e.append("userId",r);e.append("currentImage",f);$.ajax("/storage/uploadavatar",{method:"POST",data:e,processData:!1,contentType:!1,success:function(r){n.profileImageUrl.val(r.imageUrl);t&&(t(),i.destroy(),i=null)},error:function(){document.getElementById("ProfileImageUrl").src=h}})})}}function g(){var t=document.getElementById("imgCoverImage"),i=document.getElementById("coverImageCropArea"),u=document.getElementById("coverImage");u.addEventListener("change",function(t){r!==undefined&&r.destroy();var e=t.target.files,s=function(t){u.value="";i.src=t;n.modalCropCoverImage.modal("show")},f,o;e&&e.length>0&&(o=e[0],URL?s(URL.createObjectURL(o)):FileReader&&(f=new FileReader,f.onload=function(){s(f.result)},f.readAsDataURL(o)))});n.modalCropCoverImage.on("shown.bs.modal",function(){r=new Cropper(i,{aspectRatio:37/10,viewMode:3,autoCropArea:1})});document.getElementById("cropCoverImage").addEventListener("click",function(){o=!0;r&&(e=r.getCroppedCanvas({width:1200,minWidth:1200}),c=t.style.backgroundImage,$(t).css("background-image","url('"+e.toDataURL()+"')"));n.modalCropCoverImage.modal("hide")})}function a(t){if(r&&e){var i=document.getElementById("Id").value,u=document.getElementById("UserId").value,f=n.coverImage.val();e.toBlob(function(e){var o=new FormData;o.append("image",e);o.append("profileId",i);o.append("userId",u);o.append("currentImage",f);$.ajax("/storage/uploadprofilecoverimage",{method:"POST",data:o,processData:!1,contentType:!1,success:function(i){n.coverImage.val(i.imageUrl);t&&(t(),r.destroy(),r=null)},error:function(){document.getElementById("coverImage").src=c}})})}}function nt(){$("#frmProfileSave").on("click","#btnProfileSave",function(t){var i,r;return t.preventDefault(),i=$(this),MAINMODULE.Common.DisableButton(i),r=n.form.valid(),r&&(f&&o?a(function(){l(function(){s(i)})}):f&&!o?l(function(){s(i)}):!f&&o?a(function(){s(i)}):s(i)),!1})}function s(t){var i=n.form.attr("action"),r=n.form.serialize();$.ajax({type:"POST",url:i,data:r,enctype:"multipart/form-data"}).done(function(n){n.success===!0?(MAINMODULE.Common.PostSaveCallback(n,t),ALERTSYSTEM.ShowSuccessMessage("Awesome!",function(){window.location=n.url})):ALERTSYSTEM.ShowWarningMessage("An error occurred! Check the console!")})}var t={},n={},i,u,h,f=!1,r,e,c,o=!1;return{Init:v}}();$(function(){PROFILEEDIT.Init()});